{"version":3,"file":"aframe-extras.controls.js","mappings":"AAAA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,CAAC;AACD,O;;;;;;;;;ACVA,2DAA2D;AAC3D;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,CAAC;;;;;;;;;;;ACpBD;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;;;;;;;;;;ACPA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,sDAAsD;AACtD;AACA,qHAAqH;AACrH,sHAAsH;AACtH,uHAAuH;AACvH,wHAAwH;AACxH;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,6BAA6B;AAC7B;AACA;AACA,+CAA+C;AAC/C,+CAA+C;AAC/C,gDAAgD;AAChD,iDAAiD;AACjD,mIAAmI;AACnI;AACA,IAAI;AACJ;AACA;AACA,oDAAoD;AACpD,+CAA+C;AAC/C,iDAAiD;AACjD,mDAAmD;AACnD,mDAAmD;AACnD;AACA,IAAI;AACJ;AACA;AACA;AACA;AACA;AACA;AACA;AACA,OAAO;AACP;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,KAAK;AACL;AACA;AACA;AACA;AACA;AACA;AACA;AACA,KAAK;AACL;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,YAAY,gBAAgB;AAC5B;AACA;AACA;AACA,YAAY,cAAc;AAC1B;AACA,YAAY,mBAAmB;AAC/B,YAAY,aAAa;AACzB;AACA,YAAY,eAAe;AAC3B,YAAY,eAAe;AAC3B;AACA;AACA,YAAY,eAAe;AAC3B,YAAY,iBAAiB;AAC7B,YAAY,aAAa;AACzB,YAAY,eAAe;AAC3B,YAAY,kBAAkB;AAC9B,YAAY,kBAAkB;AAC9B,YAAY,oBAAoB;AAChC,YAAY,mBAAmB;AAC/B,YAAY,mBAAmB;AAC/B,YAAY,mBAAmB;AAC/B;AACA,YAAY,gBAAgB;AA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AACzC,YAAY,4BAA4B;AACxC;AACA,YAAY,gCAAgC;AAC5C;AACA;AACA;AACA;AACA,YAAY,kCAAkC,oBAAoB;AAClE,YAAY,kCAAkC;AAC9C,YAAY,mCAAmC,oBAAoB;AACnE,YAAY,6BAA6B;AACzC;AACA;AACA;AACA;AACA,YAAY,sCAAsC;AAClD;AACA,YAAY,iBAAiB;AAC7B;AACA;AACA;AACA;AACA;AACA;AACA,YAAY,cAAc;AAC1B,YAAY,eAAe;AAC3B,YAAY,eAAe;AAC3B,YAAY,kBAAkB;AAC9B,YAAY,cAAc;AAC1B,YAAY,oBAAoB;AAChC;AACA;AACA,YAAY,gBAAgB;AAC5B;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,oBAAoB,6BAA6B,GAAG,kBAAkB;AACtE,oBAAoB,4BAA4B;AAChD,oBAAoB,4BAA4B;AAChD,oBAAoB,4BAA4B;AAChD,oBAAoB,kDAAkD;AACtE,oBAAoB,wDAAwD;AAC5E,WAAW;AACX;AACA;AACA;AACA,oBAAoB,mCAAmC;AACvD,oBAAoB,6BAA6B;AACjD,WAAW;AACX;AACA;AACA;AACA,oBAAoB,6BAA6B;AACjD,WAAW;AACX;AACA;AACA;AACA,oBAAoB,mCAAmC;AACvD,WAAW;AACX;AACA;AACA,MAAM,KAAC,EAAE,EAcN;AACH;AACA;AACA;AACA,oBAAoB,eAAe;AACnC,oBAAoB,cAAc;AAClC,WAAW;AACX;AACA;AACA;AACA,oBAAoB,oCAAoC;AACxD,WAAW;AACX;AACA;AACA;AACA,oBAAoB,gCAAgC;AACpD,oBAAoB,kCAAkC;AACtD,oBAAoB,4BAA4B;AAChD,WAAW;AACX;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,qCAAqC;AACrC,qCAAqC;AACrC,qCAAqC;AACrC,qCAAqC;AACrC,qCAAqC;AACrC,qCAAqC;AACrC;AACA;AACA,qCAAqC;AACrC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,uBAAuB,sBAAsB;AAC7C;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,iCAAiC,4BAA4B;AAC7D;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,iCAAiC,uBAAuB;AACxD;AACA;AACA;AACA;AACA,iCAAiC,uBAAuB;AACxD;AACA;AACA,GAAG;AACH;AACA;AACA;AACA,GAAG;AACH;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,sCAAsC,uBAAuB;AAC7D;AACA;AACA;AACA;AACA,GAAG;AACH;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,CAAC;;;;;;;;;;;ACrFD;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,sBAAsB,mBAAO,CAAC,uDAAyB;AACvD,yBAAyB,mBAAO,CAAC,iEAA8B;AAC/D;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,eAAe,eAAe;AAC9B;AACA;AACA,2BAA2B,cAAc;AACzC,GAAG;AACH;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,uGAAuG;AACvG;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,GAAG;AACH;AACA;AACA;AACA;AACA;AACA,wBAAwB,cAAc;AACtC;AACA;AACA;AACA;AACA;AACA;AACA;AACA,GAAG;AACH;AACA;AACA;AACA;AACA;AACA,yBAAyB;AACzB;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,GAAG;AACH;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,GAAG;AACH;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,GAAG;AACH;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,GAAG;AACH;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,sBAAsB,4BAA4B;AAClD;AACA;AACA,UAAU;AACV;AACA;AACA;AACA;AACA;AACA,MAAM;AACN;AACA,wCAAwC;AACxC;AACA,GAAG;AACH;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,GAAG;AACH;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,aAAa,QAAQ;AACrB,cAAc;AACd;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,sBAAsB,oCAAoC;AAC1D;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,sBAAsB,wBAAwB;AAC9C;AACA;AACA;AACA;AACA;AACA;AACA,GAAG;AACH;AACA;AACA;AACA,cAAc,QAAQ;AACtB,cAAc;AACd;AACA;AACA;AACA,GAAG;AACH;AACA;AACA;AACA;AACA,cAAc,QAAQ;AACtB,cAAc,QAAQ;AACtB;AACA;AACA;AACA,GAAG;AACH;AACA;AACA;AACA,cAAc,UAAU;AACxB,cAAc,eAAe;AAC7B,cAAc;AACd;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,MAAM;AACN;AACA;AACA;AACA;AACA;AACA;AACA,GAAG;AACH;AACA;AACA;AACA,aAAa,eAAe;AAC5B,cAAc;AACd;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,GAAG;AACH;AACA;AACA;AACA,cAAc;AACd;AACA;AACA;AACA;AACA,GAAG;AACH;AACA;AACA;AACA;AACA,cAAc;AACd;AACA;AACA;AACA;AACA,CAAC;;;;;;;;;;;ACtVD;AACA;AACA,mBAAO,CAAC,+DAA6B;AACrC;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,WAAW,MAAM;AACjB;AACA;AACA;AACA,yBAAyB,eAAe;AACxC,yBAAyB;AACzB,GAAG;AACH;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,GAAG;AACH;AACA;AACA;AACA;AACA;AACA;AACA;AACA,GAAG;AACH;AACA;AACA;AACA;AACA;AACA;AACA;AACA,0CAA0C;AAC1C,0CAA0C;AAC1C,0CAA0C;AAC1C,0CAA0C;AAC1C;AACA;AACA,4BAA4B;AAC5B;AACA;AACA;AACA,GAAG;AACH;AACA;AACA;AACA;AACA;AACA;AACA;AACA,GAAG;AACH;AACA;AACA;AACA,GAAG;AACH;AACA;AACA;AACA;AACA;AACA;AACA,GAAG;AACH;AACA;AACA;AACA;AACA;AACA;AACA;AACA,GAAG;AACH;AACA;AACA;AACA;AACA;AACA,GAAG;AACH;AACA;AACA;AACA;AACA;AACA;AACA,GAAG;AACH;AACA;AACA;AACA;AACA;AACA;AACA,GAAG;AACH;AACA;AACA;AACA;AACA;AACA;AACA;AACA,GAAG;AACH;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,GAAG;AACH;AACA;AACA;AACA;AACA;AACA;AACA;AACA,GAAG;AACH;AACA;AACA;AACA;AACA;AACA;AACA,GAAG;AACH;AACA;AACA;AACA;AACA;AACA;AACA,CAAC;;;;;;;;;;;ACjKD;AACA;AACA;AACA;AACA;AACA;AACA;AACA,uBAAuB;AACvB;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,0BAA0B,eAAe;AACzC,0BAA0B,uDAAuD;AACjF,0BAA0B,sBAAsB;AAChD,0BAA0B,gBAAgB;AAC1C,0BAA0B,gBAAgB;AAC1C,0BAA0B;AAC1B,GAAG;AACH;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,MAAM;AACN;AACA;AACA,GAAG;AACH;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,sBAAsB,0BAA0B;AAChD;AACA,qCAAqC,4BAA4B;AACjE;AACA;AACA,GAAG;AACH;AACA;AACA;AACA;AACA,oBAAoB,0BAA0B;AAC9C;AACA,mCAAmC,4BAA4B;AAC/D;AACA,GAAG;AACH;AACA;AACA;AACA;AACA,GAAG;AACH;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,QAAQ;AACR;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,iCAAiC;AACjC;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,QAAQ;AACR;AACA,QAAQ;AACR;AACA;AACA;AACA;AACA;AACA;AACA,GAAG;AACH;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,gDAAgD,OAAO;AACvD;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,GAAG;AACH;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,UAAU;AACV;AACA;AACA,UAAU;AACV;AACA;AACA,UAAU;AACV;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,UAAU;AACV;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,GAAG;AACH,CAAC;;;;;;;;;;;;;;;AC1OD;AACgC;AAChC;AACA;AACA;AACA,eAAe,eAAe;AAC9B,YAAY,0DAA0D;AACtE,2BAA2B,cAAc;AACzC,2BAA2B,eAAe;AAC1C,2BAA2B,eAAe;AAC1C,kBAAkB,iBAAiB;AACnC,oBAAoB,iBAAiB;AACrC,4BAA4B,2CAA2C;AACvE,4BAA4B,4CAA4C;AACxE,GAAG;AACH;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,GAAG;AACH;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,MAAM;AACN;AACA;AACA;AACA;AACA,MAAM;AACN;AACA;AACA,GAAG;AACH;AACA;AACA;AACA;AACA,GAAG;AACH;AACA;AACA;AACA;AACA,GAAG;AACH;AACA;AACA;AACA,GAAG;AACH;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,2BAA2B;AAC3B,GAAG;AACH;AACA;AACA;AACA,GAAG;AACH;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,GAAG;AACH;AACA;AACA;AACA,GAAG;AACH;AACA;AACA;AACA;AACA;AACA;AACA,yBAAyB,EAAE,+BAA+B,GAAG,sBAAsB,SAAS,wBAAwB;AACpH;AACA;AACA;AACA,GAAG;AACH;AACA;AACA;AACA;AACA;AACA;AACA,yBAAyB,EAAE,+BAA+B,GAAG,sBAAsB,SAAS,wBAAwB;AACpH;AACA;AACA;AACA,GAAG;AACH;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,2BAA2B;AAC3B,MAAM;AACN;AACA;AACA;AACA,wBAAwB,sDAAe;AACvC;AACA;AACA;AACA,KAAK;AACL;AACA;AACA,KAAK;AACL,GAAG;AACH;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,2BAA2B;AAC3B,MAAM;AACN;AACA;AACA;AACA,wBAAwB,sDAAe;AACvC;AACA;AACA;AACA,KAAK;AACL;AACA;AACA,KAAK;AACL,GAAG;AACH;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,GAAG;AACH;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,GAAG;AACH,CAAC;;;;;;;;;;;ACnND;AACA;AACA;AACA;AACA;AACA,eAAe,eAAe;AAC9B,sBAAsB;AACtB,GAAG;AACH;AACA;AACA;AACA;AACA;AACA,GAAG;AACH;AACA;AACA;AACA,GAAG;AACH;AACA;AACA;AACA;AACA,GAAG;AACH;AACA;AACA;AACA,GAAG;AACH;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,gEAAgE,cAAc;AAC9E,4DAA4D,cAAc;AAC1E;AACA;AACA;AACA;AACA,GAAG;AACH;AACA;AACA;AACA,qBAAqB;AACrB;AACA;AACA;AACA;AACA,GAAG;AACH;AACA;AACA;AACA,GAAG;AACH;AACA;AACA;AACA;AACA,GAAG;AACH;AACA;AACA;AACA;AACA;AACA,GAAG;AACH;AACA;AACA;AACA;AACA;AACA;AACA;AACA,GAAG;AACH;AACA;AACA;AACA;AACA,GAAG;AACH;AACA;AACA;AACA;AACA,sBAAsB;AACtB;AACA;AACA;AACA,CAAC;;;;;;;;;;;ACzFD;AACA;AACA;AACA;AACA;AACA,eAAe,eAAe;AAC9B,kBAAkB,eAAe;AACjC,kBAAkB,eAAe;AACjC,kBAAkB,eAAe;AACjC,kBAAkB,eAAe;AACjC,YAAY;AACZ;AACA,GAAG;AACH;AACA;AACA;AACA;AACA;AACA;AACA,GAAG;AACH;AACA;AACA;AACA,GAAG;AACH;AACA;AACA;AACA;AACA,GAAG;AACH;AACA;AACA;AACA,GAAG;AACH;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,GAAG;AACH;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,GAAG;AACH;AACA;AACA;AACA,GAAG;AACH;AACA;AACA;AACA;AACA;AACA,GAAG;AACH;AACA;AACA;AACA;AACA;AACA,GAAG;AACH;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,GAAG;AACH;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,GAAG;AACH;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,GAAG;AACH;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,QAAQ;AACR;AACA;AACA;AACA;AACA;AACA;AACA,GAAG;AACH;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,MAAM;AACN;AACA;AACA;AACA;AACA;AACA;AACA,CAAC;AACD;;;;;;;UCrMA;UACA;;UAEA;UACA;UACA;UACA;UACA;UACA;UACA;UACA;UACA;UACA;UACA;UACA;UACA;;UAEA;UACA;;UAEA;UACA;UACA;;;;;WCtBA;WACA;WACA;WACA;WACA;WACA,iCAAiC,WAAW;WAC5C;WACA;;;;;WCPA;WACA;WACA;WACA;WACA,yCAAyC,wCAAwC;WACjF;WACA;WACA;;;;;WCPA;;;;;WCAA;WACA;WACA;WACA,uDAAuD,iBAAiB;WACxE;WACA,gDAAgD,aAAa;WAC7D;;;;;;;;;;ACNA,mBAAO,CAAC,oEAAuB;AAC/B,mBAAO,CAAC,8DAAoB;AAC5B,mBAAO,CAAC,gEAAqB;AAC7B,mBAAO,CAAC,0DAAkB;AAC1B,mBAAO,CAAC,gEAAqB;AAC7B,mBAAO,CAAC,gEAAqB;AAC7B,mBAAO,CAAC,4DAAmB","sources":["webpack://bs-aframe-extras/webpack/universalModuleDefinition","webpack://bs-aframe-extras/./lib/GamepadButton.js","webpack://bs-aframe-extras/./lib/GamepadButtonEvent.js","webpack://bs-aframe-extras/./lib/keyboard.polyfill.js","webpack://bs-aframe-extras/./node_modules/nipplejs/dist/nipplejs.js","webpack://bs-aframe-extras/./src/controls/checkpoint-controls.js","webpack://bs-aframe-extras/./src/controls/gamepad-controls.js","webpack://bs-aframe-extras/./src/controls/keyboard-controls.js","webpack://bs-aframe-extras/./src/controls/movement-controls.js","webpack://bs-aframe-extras/./src/controls/nipple-controls.js","webpack://bs-aframe-extras/./src/controls/touch-controls.js","webpack://bs-aframe-extras/./src/controls/trackpad-controls.js","webpack://bs-aframe-extras/webpack/bootstrap","webpack://bs-aframe-extras/webpack/runtime/compat get default export","webpack://bs-aframe-extras/webpack/runtime/define property getters","webpack://bs-aframe-extras/webpack/runtime/hasOwnProperty shorthand","webpack://bs-aframe-extras/webpack/runtime/make namespace object","webpack://bs-aframe-extras/./src/controls/index.js"],"sourcesContent":["(function webpackUniversalModuleDefinition(root, factory) {\n\tif(typeof exports === 'object' && typeof module === 'object')\n\t\tmodule.exports = factory();\n\telse if(typeof define === 'function' && define.amd)\n\t\tdefine([], factory);\n\telse {\n\t\tvar a = factory();\n\t\tfor(var i in a) (typeof exports === 'object' ? exports : root)[i] = a[i];\n\t}\n})(self, () => {\nreturn ","module.exports = Object.assign(function GamepadButton () {}, {\r\n\tFACE_1: 0,\r\n\tFACE_2: 1,\r\n\tFACE_3: 2,\r\n\tFACE_4: 3,\r\n\r\n\tL_SHOULDER_1: 4,\r\n\tR_SHOULDER_1: 5,\r\n\tL_SHOULDER_2: 6,\r\n\tR_SHOULDER_2: 7,\r\n\r\n\tSELECT: 8,\r\n\tSTART: 9,\r\n\r\n\tDPAD_UP: 12,\r\n\tDPAD_DOWN: 13,\r\n\tDPAD_LEFT: 14,\r\n\tDPAD_RIGHT: 15,\r\n\r\n\tVENDOR: 16,\r\n});\r\n","function GamepadButtonEvent (type, index, details) {\r\n  this.type = type;\r\n  this.index = index;\r\n  this.pressed = details.pressed;\r\n  this.value = details.value;\r\n}\r\n\r\nmodule.exports = GamepadButtonEvent;\r\n","/**\r\n * Polyfill for the additional KeyboardEvent properties defined in the D3E and\r\n * D4E draft specifications, by @inexorabletash.\r\n *\r\n * See: https://github.com/inexorabletash/polyfill\r\n */\r\n(function(global) {\r\n  var nativeKeyboardEvent = ('KeyboardEvent' in global);\r\n  if (!nativeKeyboardEvent)\r\n    global.KeyboardEvent = function KeyboardEvent() { throw TypeError('Illegal constructor'); };\r\n\r\n  if (!('DOM_KEY_LOCATION_STANDARD' in global.KeyboardEvent)) global.KeyboardEvent.DOM_KEY_LOCATION_STANDARD = 0x00; // Default or unknown location\r\n  if (!('DOM_KEY_LOCATION_LEFT' in global.KeyboardEvent)) global.KeyboardEvent.DOM_KEY_LOCATION_LEFT          = 0x01; // e.g. Left Alt key\r\n  if (!('DOM_KEY_LOCATION_RIGHT' in global.KeyboardEvent)) global.KeyboardEvent.DOM_KEY_LOCATION_RIGHT         = 0x02; // e.g. Right Alt key\r\n  if (!('DOM_KEY_LOCATION_NUMPAD' in global.KeyboardEvent)) global.KeyboardEvent.DOM_KEY_LOCATION_NUMPAD        = 0x03; // e.g. Numpad 0 or +\r\n\r\n  var STANDARD = window.KeyboardEvent.DOM_KEY_LOCATION_STANDARD,\r\n      LEFT = window.KeyboardEvent.DOM_KEY_LOCATION_LEFT,\r\n      RIGHT = window.KeyboardEvent.DOM_KEY_LOCATION_RIGHT,\r\n      NUMPAD = window.KeyboardEvent.DOM_KEY_LOCATION_NUMPAD;\r\n\r\n  //--------------------------------------------------------------------\r\n  //\r\n  // Utilities\r\n  //\r\n  //--------------------------------------------------------------------\r\n\r\n  function contains(s, ss) { return String(s).indexOf(ss) !== -1; }\r\n\r\n  var os = (function() {\r\n    if (contains(navigator.platform, 'Win')) { return 'win'; }\r\n    if (contains(navigator.platform, 'Mac')) { return 'mac'; }\r\n    if (contains(navigator.platform, 'CrOS')) { return 'cros'; }\r\n    if (contains(navigator.platform, 'Linux')) { return 'linux'; }\r\n    if (contains(navigator.userAgent, 'iPad') || contains(navigator.platform, 'iPod') || contains(navigator.platform, 'iPhone')) { return 'ios'; }\r\n    return '';\r\n  } ());\r\n\r\n  var browser = (function() {\r\n    if (contains(navigator.userAgent, 'Chrome/')) { return 'chrome'; }\r\n    if (contains(navigator.vendor, 'Apple')) { return 'safari'; }\r\n    if (contains(navigator.userAgent, 'MSIE')) { return 'ie'; }\r\n    if (contains(navigator.userAgent, 'Gecko/')) { return 'moz'; }\r\n    if (contains(navigator.userAgent, 'Opera/')) { return 'opera'; }\r\n    return '';\r\n  } ());\r\n\r\n  var browser_os = browser + '-' + os;\r\n\r\n  function mergeIf(baseTable, select, table) {\r\n    if (browser_os === select || browser === select || os === select) {\r\n      Object.keys(table).forEach(function(keyCode) {\r\n        baseTable[keyCode] = table[keyCode];\r\n      });\r\n    }\r\n  }\r\n\r\n  function remap(o, key) {\r\n    var r = {};\r\n    Object.keys(o).forEach(function(k) {\r\n      var item = o[k];\r\n      if (key in item) {\r\n        r[item[key]] = item;\r\n      }\r\n    });\r\n    return r;\r\n  }\r\n\r\n  function invert(o) {\r\n    var r = {};\r\n    Object.keys(o).forEach(function(k) {\r\n      r[o[k]] = k;\r\n    });\r\n    return r;\r\n  }\r\n\r\n  //--------------------------------------------------------------------\r\n  //\r\n  // Generic Mappings\r\n  //\r\n  //--------------------------------------------------------------------\r\n\r\n  // \"keyInfo\" is a dictionary:\r\n  //   code: string - name from DOM Level 3 KeyboardEvent code Values\r\n  //     https://dvcs.w3.org/hg/dom3events/raw-file/tip/html/DOM3Events-code.html\r\n  //   location (optional): number - one of the DOM_KEY_LOCATION values\r\n  //   keyCap (optional): string - keyboard label in en-US locale\r\n  // USB code Usage ID from page 0x07 unless otherwise noted (Informative)\r\n\r\n  // Map of keyCode to keyInfo\r\n  var keyCodeToInfoTable = {\r\n    // 0x01 - VK_LBUTTON\r\n    // 0x02 - VK_RBUTTON\r\n    0x03: { code: 'Cancel' }, // [USB: 0x9b] char \\x0018 ??? (Not in D3E)\r\n    // 0x04 - VK_MBUTTON\r\n    // 0x05 - VK_XBUTTON1\r\n    // 0x06 - VK_XBUTTON2\r\n    0x06: { code: 'Help' }, // [USB: 0x75] ???\r\n    // 0x07 - undefined\r\n    0x08: { code: 'Backspace' }, // [USB: 0x2a] Labelled Delete on Macintosh keyboards.\r\n    0x09: { code: 'Tab' }, // [USB: 0x2b]\r\n    // 0x0A-0x0B - reserved\r\n    0X0C: { code: 'Clear' }, // [USB: 0x9c] NumPad Center (Not in D3E)\r\n    0X0D: { code: 'Enter' }, // [USB: 0x28]\r\n    // 0x0E-0x0F - undefined\r\n\r\n    0x10: { code: 'Shift' },\r\n    0x11: { code: 'Control' },\r\n    0x12: { code: 'Alt' },\r\n    0x13: { code: 'Pause' }, // [USB: 0x48]\r\n    0x14: { code: 'CapsLock' }, // [USB: 0x39]\r\n    0x15: { code: 'KanaMode' }, // [USB: 0x88] - \"HangulMode\" for Korean layout\r\n    0x16: { code: 'HangulMode' }, // [USB: 0x90] 0x15 as well in MSDN VK table ???\r\n    0x17: { code: 'JunjaMode' }, // (Not in D3E)\r\n    0x18: { code: 'FinalMode' }, // (Not in D3E)\r\n    0x19: { code: 'KanjiMode' }, // [USB: 0x91] - \"HanjaMode\" for Korean layout\r\n    // 0x1A - undefined\r\n    0x1B: { code: 'Escape' }, // [USB: 0x29]\r\n    0x1C: { code: 'Convert' }, // [USB: 0x8a]\r\n    0x1D: { code: 'NonConvert' }, // [USB: 0x8b]\r\n    0x1E: { code: 'Accept' }, // (Not in D3E)\r\n    0x1F: { code: 'ModeChange' }, // (Not in D3E)\r\n\r\n    0x20: { code: 'Space' }, // [USB: 0x2c]\r\n    0x21: { code: 'PageUp' }, // [USB: 0x4b]\r\n    0x22: { code: 'PageDown' }, // [USB: 0x4e]\r\n    0x23: { code: 'End' }, // [USB: 0x4d]\r\n    0x24: { code: 'Home' }, // [USB: 0x4a]\r\n    0x25: { code: 'ArrowLeft' }, // [USB: 0x50]\r\n    0x26: { code: 'ArrowUp' }, // [USB: 0x52]\r\n    0x27: { code: 'ArrowRight' }, // [USB: 0x4f]\r\n    0x28: { code: 'ArrowDown' }, // [USB: 0x51]\r\n    0x29: { code: 'Select' }, // (Not in D3E)\r\n    0x2A: { code: 'Print' }, // (Not in D3E)\r\n    0x2B: { code: 'Execute' }, // [USB: 0x74] (Not in D3E)\r\n    0x2C: { code: 'PrintScreen' }, // [USB: 0x46]\r\n    0x2D: { code: 'Insert' }, // [USB: 0x49]\r\n    0x2E: { code: 'Delete' }, // [USB: 0x4c]\r\n    0x2F: { code: 'Help' }, // [USB: 0x75] ???\r\n\r\n    0x30: { code: 'Digit0', keyCap: '0' }, // [USB: 0x27] 0)\r\n    0x31: { code: 'Digit1', keyCap: '1' }, // [USB: 0x1e] 1!\r\n    0x32: { code: 'Digit2', keyCap: '2' }, // [USB: 0x1f] 2@\r\n    0x33: { code: 'Digit3', keyCap: '3' }, // [USB: 0x20] 3#\r\n    0x34: { code: 'Digit4', keyCap: '4' }, // [USB: 0x21] 4$\r\n    0x35: { code: 'Digit5', keyCap: '5' }, // [USB: 0x22] 5%\r\n    0x36: { code: 'Digit6', keyCap: '6' }, // [USB: 0x23] 6^\r\n    0x37: { code: 'Digit7', keyCap: '7' }, // [USB: 0x24] 7&\r\n    0x38: { code: 'Digit8', keyCap: '8' }, // [USB: 0x25] 8*\r\n    0x39: { code: 'Digit9', keyCap: '9' }, // [USB: 0x26] 9(\r\n    // 0x3A-0x40 - undefined\r\n\r\n    0x41: { code: 'KeyA', keyCap: 'a' }, // [USB: 0x04]\r\n    0x42: { code: 'KeyB', keyCap: 'b' }, // [USB: 0x05]\r\n    0x43: { code: 'KeyC', keyCap: 'c' }, // [USB: 0x06]\r\n    0x44: { code: 'KeyD', keyCap: 'd' }, // [USB: 0x07]\r\n    0x45: { code: 'KeyE', keyCap: 'e' }, // [USB: 0x08]\r\n    0x46: { code: 'KeyF', keyCap: 'f' }, // [USB: 0x09]\r\n    0x47: { code: 'KeyG', keyCap: 'g' }, // [USB: 0x0a]\r\n    0x48: { code: 'KeyH', keyCap: 'h' }, // [USB: 0x0b]\r\n    0x49: { code: 'KeyI', keyCap: 'i' }, // [USB: 0x0c]\r\n    0x4A: { code: 'KeyJ', keyCap: 'j' }, // [USB: 0x0d]\r\n    0x4B: { code: 'KeyK', keyCap: 'k' }, // [USB: 0x0e]\r\n    0x4C: { code: 'KeyL', keyCap: 'l' }, // [USB: 0x0f]\r\n    0x4D: { code: 'KeyM', keyCap: 'm' }, // [USB: 0x10]\r\n    0x4E: { code: 'KeyN', keyCap: 'n' }, // [USB: 0x11]\r\n    0x4F: { code: 'KeyO', keyCap: 'o' }, // [USB: 0x12]\r\n\r\n    0x50: { code: 'KeyP', keyCap: 'p' }, // [USB: 0x13]\r\n    0x51: { code: 'KeyQ', keyCap: 'q' }, // [USB: 0x14]\r\n    0x52: { code: 'KeyR', keyCap: 'r' }, // [USB: 0x15]\r\n    0x53: { code: 'KeyS', keyCap: 's' }, // [USB: 0x16]\r\n    0x54: { code: 'KeyT', keyCap: 't' }, // [USB: 0x17]\r\n    0x55: { code: 'KeyU', keyCap: 'u' }, // [USB: 0x18]\r\n    0x56: { code: 'KeyV', keyCap: 'v' }, // [USB: 0x19]\r\n    0x57: { code: 'KeyW', keyCap: 'w' }, // [USB: 0x1a]\r\n    0x58: { code: 'KeyX', keyCap: 'x' }, // [USB: 0x1b]\r\n    0x59: { code: 'KeyY', keyCap: 'y' }, // [USB: 0x1c]\r\n    0x5A: { code: 'KeyZ', keyCap: 'z' }, // [USB: 0x1d]\r\n    0x5B: { code: 'OSLeft', location: LEFT }, // [USB: 0xe3]\r\n    0x5C: { code: 'OSRight', location: RIGHT }, // [USB: 0xe7]\r\n    0x5D: { code: 'ContextMenu' }, // [USB: 0x65] Context Menu\r\n    // 0x5E - reserved\r\n    0x5F: { code: 'Standby' }, // [USB: 0x82] Sleep\r\n\r\n    0x60: { code: 'Numpad0', keyCap: '0', location: NUMPAD }, // [USB: 0x62]\r\n    0x61: { code: 'Numpad1', keyCap: '1', location: NUMPAD }, // [USB: 0x59]\r\n    0x62: { code: 'Numpad2', keyCap: '2', location: NUMPAD }, // [USB: 0x5a]\r\n    0x63: { code: 'Numpad3', keyCap: '3', location: NUMPAD }, // [USB: 0x5b]\r\n    0x64: { code: 'Numpad4', keyCap: '4', location: NUMPAD }, // [USB: 0x5c]\r\n    0x65: { code: 'Numpad5', keyCap: '5', location: NUMPAD }, // [USB: 0x5d]\r\n    0x66: { code: 'Numpad6', keyCap: '6', location: NUMPAD }, // [USB: 0x5e]\r\n    0x67: { code: 'Numpad7', keyCap: '7', location: NUMPAD }, // [USB: 0x5f]\r\n    0x68: { code: 'Numpad8', keyCap: '8', location: NUMPAD }, // [USB: 0x60]\r\n    0x69: { code: 'Numpad9', keyCap: '9', location: NUMPAD }, // [USB: 0x61]\r\n    0x6A: { code: 'NumpadMultiply', keyCap: '*', location: NUMPAD }, // [USB: 0x55]\r\n    0x6B: { code: 'NumpadAdd', keyCap: '+', location: NUMPAD }, // [USB: 0x57]\r\n    0x6C: { code: 'NumpadComma', keyCap: ',', location: NUMPAD }, // [USB: 0x85]\r\n    0x6D: { code: 'NumpadSubtract', keyCap: '-', location: NUMPAD }, // [USB: 0x56]\r\n    0x6E: { code: 'NumpadDecimal', keyCap: '.', location: NUMPAD }, // [USB: 0x63]\r\n    0x6F: { code: 'NumpadDivide', keyCap: '/', location: NUMPAD }, // [USB: 0x54]\r\n\r\n    0x70: { code: 'F1' }, // [USB: 0x3a]\r\n    0x71: { code: 'F2' }, // [USB: 0x3b]\r\n    0x72: { code: 'F3' }, // [USB: 0x3c]\r\n    0x73: { code: 'F4' }, // [USB: 0x3d]\r\n    0x74: { code: 'F5' }, // [USB: 0x3e]\r\n    0x75: { code: 'F6' }, // [USB: 0x3f]\r\n    0x76: { code: 'F7' }, // [USB: 0x40]\r\n    0x77: { code: 'F8' }, // [USB: 0x41]\r\n    0x78: { code: 'F9' }, // [USB: 0x42]\r\n    0x79: { code: 'F10' }, // [USB: 0x43]\r\n    0x7A: { code: 'F11' }, // [USB: 0x44]\r\n    0x7B: { code: 'F12' }, // [USB: 0x45]\r\n    0x7C: { code: 'F13' }, // [USB: 0x68]\r\n    0x7D: { code: 'F14' }, // [USB: 0x69]\r\n    0x7E: { code: 'F15' }, // [USB: 0x6a]\r\n    0x7F: { code: 'F16' }, // [USB: 0x6b]\r\n\r\n    0x80: { code: 'F17' }, // [USB: 0x6c]\r\n    0x81: { code: 'F18' }, // [USB: 0x6d]\r\n    0x82: { code: 'F19' }, // [USB: 0x6e]\r\n    0x83: { code: 'F20' }, // [USB: 0x6f]\r\n    0x84: { code: 'F21' }, // [USB: 0x70]\r\n    0x85: { code: 'F22' }, // [USB: 0x71]\r\n    0x86: { code: 'F23' }, // [USB: 0x72]\r\n    0x87: { code: 'F24' }, // [USB: 0x73]\r\n    // 0x88-0x8F - unassigned\r\n\r\n    0x90: { code: 'NumLock', location: NUMPAD }, // [USB: 0x53]\r\n    0x91: { code: 'ScrollLock' }, // [USB: 0x47]\r\n    // 0x92-0x96 - OEM specific\r\n    // 0x97-0x9F - unassigned\r\n\r\n    // NOTE: 0xA0-0xA5 usually mapped to 0x10-0x12 in browsers\r\n    0xA0: { code: 'ShiftLeft', location: LEFT }, // [USB: 0xe1]\r\n    0xA1: { code: 'ShiftRight', location: RIGHT }, // [USB: 0xe5]\r\n    0xA2: { code: 'ControlLeft', location: LEFT }, // [USB: 0xe0]\r\n    0xA3: { code: 'ControlRight', location: RIGHT }, // [USB: 0xe4]\r\n    0xA4: { code: 'AltLeft', location: LEFT }, // [USB: 0xe2]\r\n    0xA5: { code: 'AltRight', location: RIGHT }, // [USB: 0xe6]\r\n\r\n    0xA6: { code: 'BrowserBack' }, // [USB: 0x0c/0x0224]\r\n    0xA7: { code: 'BrowserForward' }, // [USB: 0x0c/0x0225]\r\n    0xA8: { code: 'BrowserRefresh' }, // [USB: 0x0c/0x0227]\r\n    0xA9: { code: 'BrowserStop' }, // [USB: 0x0c/0x0226]\r\n    0xAA: { code: 'BrowserSearch' }, // [USB: 0x0c/0x0221]\r\n    0xAB: { code: 'BrowserFavorites' }, // [USB: 0x0c/0x0228]\r\n    0xAC: { code: 'BrowserHome' }, // [USB: 0x0c/0x0222]\r\n    0xAD: { code: 'VolumeMute' }, // [USB: 0x7f]\r\n    0xAE: { code: 'VolumeDown' }, // [USB: 0x81]\r\n    0xAF: { code: 'VolumeUp' }, // [USB: 0x80]\r\n\r\n    0xB0: { code: 'MediaTrackNext' }, // [USB: 0x0c/0x00b5]\r\n    0xB1: { code: 'MediaTrackPrevious' }, // [USB: 0x0c/0x00b6]\r\n    0xB2: { code: 'MediaStop' }, // [USB: 0x0c/0x00b7]\r\n    0xB3: { code: 'MediaPlayPause' }, // [USB: 0x0c/0x00cd]\r\n    0xB4: { code: 'LaunchMail' }, // [USB: 0x0c/0x018a]\r\n    0xB5: { code: 'MediaSelect' },\r\n    0xB6: { code: 'LaunchApp1' },\r\n    0xB7: { code: 'LaunchApp2' },\r\n    // 0xB8-0xB9 - reserved\r\n    0xBA: { code: 'Semicolon',  keyCap: ';' }, // [USB: 0x33] ;: (US Standard 101)\r\n    0xBB: { code: 'Equal', keyCap: '=' }, // [USB: 0x2e] =+\r\n    0xBC: { code: 'Comma', keyCap: ',' }, // [USB: 0x36] ,<\r\n    0xBD: { code: 'Minus', keyCap: '-' }, // [USB: 0x2d] -_\r\n    0xBE: { code: 'Period', keyCap: '.' }, // [USB: 0x37] .>\r\n    0xBF: { code: 'Slash', keyCap: '/' }, // [USB: 0x38] /? (US Standard 101)\r\n\r\n    0xC0: { code: 'Backquote', keyCap: '`' }, // [USB: 0x35] `~ (US Standard 101)\r\n    // 0xC1-0xCF - reserved\r\n\r\n    // 0xD0-0xD7 - reserved\r\n    // 0xD8-0xDA - unassigned\r\n    0xDB: { code: 'BracketLeft', keyCap: '[' }, // [USB: 0x2f] [{ (US Standard 101)\r\n    0xDC: { code: 'Backslash',  keyCap: '\\\\' }, // [USB: 0x31] \\| (US Standard 101)\r\n    0xDD: { code: 'BracketRight', keyCap: ']' }, // [USB: 0x30] ]} (US Standard 101)\r\n    0xDE: { code: 'Quote', keyCap: '\\'' }, // [USB: 0x34] '\" (US Standard 101)\r\n    // 0xDF - miscellaneous/varies\r\n\r\n    // 0xE0 - reserved\r\n    // 0xE1 - OEM specific\r\n    0xE2: { code: 'IntlBackslash',  keyCap: '\\\\' }, // [USB: 0x64] \\| (UK Standard 102)\r\n    // 0xE3-0xE4 - OEM specific\r\n    0xE5: { code: 'Process' }, // (Not in D3E)\r\n    // 0xE6 - OEM specific\r\n    // 0xE7 - VK_PACKET\r\n    // 0xE8 - unassigned\r\n    // 0xE9-0xEF - OEM specific\r\n\r\n    // 0xF0-0xF5 - OEM specific\r\n    0xF6: { code: 'Attn' }, // [USB: 0x9a] (Not in D3E)\r\n    0xF7: { code: 'CrSel' }, // [USB: 0xa3] (Not in D3E)\r\n    0xF8: { code: 'ExSel' }, // [USB: 0xa4] (Not in D3E)\r\n    0xF9: { code: 'EraseEof' }, // (Not in D3E)\r\n    0xFA: { code: 'Play' }, // (Not in D3E)\r\n    0xFB: { code: 'ZoomToggle' }, // (Not in D3E)\r\n    // 0xFC - VK_NONAME - reserved\r\n    // 0xFD - VK_PA1\r\n    0xFE: { code: 'Clear' } // [USB: 0x9c] (Not in D3E)\r\n  };\r\n\r\n  // No legacy keyCode, but listed in D3E:\r\n\r\n  // code: usb\r\n  // 'IntlHash': 0x070032,\r\n  // 'IntlRo': 0x070087,\r\n  // 'IntlYen': 0x070089,\r\n  // 'NumpadBackspace': 0x0700bb,\r\n  // 'NumpadClear': 0x0700d8,\r\n  // 'NumpadClearEntry': 0x0700d9,\r\n  // 'NumpadMemoryAdd': 0x0700d3,\r\n  // 'NumpadMemoryClear': 0x0700d2,\r\n  // 'NumpadMemoryRecall': 0x0700d1,\r\n  // 'NumpadMemoryStore': 0x0700d0,\r\n  // 'NumpadMemorySubtract': 0x0700d4,\r\n  // 'NumpadParenLeft': 0x0700b6,\r\n  // 'NumpadParenRight': 0x0700b7,\r\n\r\n  //--------------------------------------------------------------------\r\n  //\r\n  // Browser/OS Specific Mappings\r\n  //\r\n  //--------------------------------------------------------------------\r\n\r\n  mergeIf(keyCodeToInfoTable,\r\n          'moz', {\r\n            0x3B: { code: 'Semicolon', keyCap: ';' }, // [USB: 0x33] ;: (US Standard 101)\r\n            0x3D: { code: 'Equal', keyCap: '=' }, // [USB: 0x2e] =+\r\n            0x6B: { code: 'Equal', keyCap: '=' }, // [USB: 0x2e] =+\r\n            0x6D: { code: 'Minus', keyCap: '-' }, // [USB: 0x2d] -_\r\n            0xBB: { code: 'NumpadAdd', keyCap: '+', location: NUMPAD }, // [USB: 0x57]\r\n            0xBD: { code: 'NumpadSubtract', keyCap: '-', location: NUMPAD } // [USB: 0x56]\r\n          });\r\n\r\n  mergeIf(keyCodeToInfoTable,\r\n          'moz-mac', {\r\n            0x0C: { code: 'NumLock', location: NUMPAD }, // [USB: 0x53]\r\n            0xAD: { code: 'Minus', keyCap: '-' } // [USB: 0x2d] -_\r\n          });\r\n\r\n  mergeIf(keyCodeToInfoTable,\r\n          'moz-win', {\r\n            0xAD: { code: 'Minus', keyCap: '-' } // [USB: 0x2d] -_\r\n          });\r\n\r\n  mergeIf(keyCodeToInfoTable,\r\n          'chrome-mac', {\r\n            0x5D: { code: 'OSRight', location: RIGHT } // [USB: 0xe7]\r\n          });\r\n\r\n  // Windows via Bootcamp (!)\r\n  if (0) {\r\n    mergeIf(keyCodeToInfoTable,\r\n            'chrome-win', {\r\n              0xC0: { code: 'Quote', keyCap: '\\'' }, // [USB: 0x34] '\" (US Standard 101)\r\n              0xDE: { code: 'Backslash',  keyCap: '\\\\' }, // [USB: 0x31] \\| (US Standard 101)\r\n              0xDF: { code: 'Backquote', keyCap: '`' } // [USB: 0x35] `~ (US Standard 101)\r\n            });\r\n\r\n    mergeIf(keyCodeToInfoTable,\r\n            'ie', {\r\n              0xC0: { code: 'Quote', keyCap: '\\'' }, // [USB: 0x34] '\" (US Standard 101)\r\n              0xDE: { code: 'Backslash',  keyCap: '\\\\' }, // [USB: 0x31] \\| (US Standard 101)\r\n              0xDF: { code: 'Backquote', keyCap: '`' } // [USB: 0x35] `~ (US Standard 101)\r\n            });\r\n  }\r\n\r\n  mergeIf(keyCodeToInfoTable,\r\n          'safari', {\r\n            0x03: { code: 'Enter' }, // [USB: 0x28] old Safari\r\n            0x19: { code: 'Tab' } // [USB: 0x2b] old Safari for Shift+Tab\r\n          });\r\n\r\n  mergeIf(keyCodeToInfoTable,\r\n          'ios', {\r\n            0x0A: { code: 'Enter', location: STANDARD } // [USB: 0x28]\r\n          });\r\n\r\n  mergeIf(keyCodeToInfoTable,\r\n          'safari-mac', {\r\n            0x5B: { code: 'OSLeft', location: LEFT }, // [USB: 0xe3]\r\n            0x5D: { code: 'OSRight', location: RIGHT }, // [USB: 0xe7]\r\n            0xE5: { code: 'KeyQ', keyCap: 'Q' } // [USB: 0x14] On alternate presses, Ctrl+Q sends this\r\n          });\r\n\r\n  //--------------------------------------------------------------------\r\n  //\r\n  // Identifier Mappings\r\n  //\r\n  //--------------------------------------------------------------------\r\n\r\n  // Cases where newer-ish browsers send keyIdentifier which can be\r\n  // used to disambiguate keys.\r\n\r\n  // keyIdentifierTable[keyIdentifier] -> keyInfo\r\n\r\n  var keyIdentifierTable = {};\r\n  if ('cros' === os) {\r\n    keyIdentifierTable['U+00A0'] = { code: 'ShiftLeft', location: LEFT };\r\n    keyIdentifierTable['U+00A1'] = { code: 'ShiftRight', location: RIGHT };\r\n    keyIdentifierTable['U+00A2'] = { code: 'ControlLeft', location: LEFT };\r\n    keyIdentifierTable['U+00A3'] = { code: 'ControlRight', location: RIGHT };\r\n    keyIdentifierTable['U+00A4'] = { code: 'AltLeft', location: LEFT };\r\n    keyIdentifierTable['U+00A5'] = { code: 'AltRight', location: RIGHT };\r\n  }\r\n  if ('chrome-mac' === browser_os) {\r\n    keyIdentifierTable['U+0010'] = { code: 'ContextMenu' };\r\n  }\r\n  if ('safari-mac' === browser_os) {\r\n    keyIdentifierTable['U+0010'] = { code: 'ContextMenu' };\r\n  }\r\n  if ('ios' === os) {\r\n    // These only generate keyup events\r\n    keyIdentifierTable['U+0010'] = { code: 'Function' };\r\n\r\n    keyIdentifierTable['U+001C'] = { code: 'ArrowLeft' };\r\n    keyIdentifierTable['U+001D'] = { code: 'ArrowRight' };\r\n    keyIdentifierTable['U+001E'] = { code: 'ArrowUp' };\r\n    keyIdentifierTable['U+001F'] = { code: 'ArrowDown' };\r\n\r\n    keyIdentifierTable['U+0001'] = { code: 'Home' }; // [USB: 0x4a] Fn + ArrowLeft\r\n    keyIdentifierTable['U+0004'] = { code: 'End' }; // [USB: 0x4d] Fn + ArrowRight\r\n    keyIdentifierTable['U+000B'] = { code: 'PageUp' }; // [USB: 0x4b] Fn + ArrowUp\r\n    keyIdentifierTable['U+000C'] = { code: 'PageDown' }; // [USB: 0x4e] Fn + ArrowDown\r\n  }\r\n\r\n  //--------------------------------------------------------------------\r\n  //\r\n  // Location Mappings\r\n  //\r\n  //--------------------------------------------------------------------\r\n\r\n  // Cases where newer-ish browsers send location/keyLocation which\r\n  // can be used to disambiguate keys.\r\n\r\n  // locationTable[location][keyCode] -> keyInfo\r\n  var locationTable = [];\r\n  locationTable[LEFT] = {\r\n    0x10: { code: 'ShiftLeft', location: LEFT }, // [USB: 0xe1]\r\n    0x11: { code: 'ControlLeft', location: LEFT }, // [USB: 0xe0]\r\n    0x12: { code: 'AltLeft', location: LEFT } // [USB: 0xe2]\r\n  };\r\n  locationTable[RIGHT] = {\r\n    0x10: { code: 'ShiftRight', location: RIGHT }, // [USB: 0xe5]\r\n    0x11: { code: 'ControlRight', location: RIGHT }, // [USB: 0xe4]\r\n    0x12: { code: 'AltRight', location: RIGHT } // [USB: 0xe6]\r\n  };\r\n  locationTable[NUMPAD] = {\r\n    0x0D: { code: 'NumpadEnter', location: NUMPAD } // [USB: 0x58]\r\n  };\r\n\r\n  mergeIf(locationTable[NUMPAD], 'moz', {\r\n    0x6D: { code: 'NumpadSubtract', location: NUMPAD }, // [USB: 0x56]\r\n    0x6B: { code: 'NumpadAdd', location: NUMPAD } // [USB: 0x57]\r\n  });\r\n  mergeIf(locationTable[LEFT], 'moz-mac', {\r\n    0xE0: { code: 'OSLeft', location: LEFT } // [USB: 0xe3]\r\n  });\r\n  mergeIf(locationTable[RIGHT], 'moz-mac', {\r\n    0xE0: { code: 'OSRight', location: RIGHT } // [USB: 0xe7]\r\n  });\r\n  mergeIf(locationTable[RIGHT], 'moz-win', {\r\n    0x5B: { code: 'OSRight', location: RIGHT } // [USB: 0xe7]\r\n  });\r\n\r\n\r\n  mergeIf(locationTable[RIGHT], 'mac', {\r\n    0x5D: { code: 'OSRight', location: RIGHT } // [USB: 0xe7]\r\n  });\r\n\r\n  mergeIf(locationTable[NUMPAD], 'chrome-mac', {\r\n    0x0C: { code: 'NumLock', location: NUMPAD } // [USB: 0x53]\r\n  });\r\n\r\n  mergeIf(locationTable[NUMPAD], 'safari-mac', {\r\n    0x0C: { code: 'NumLock', location: NUMPAD }, // [USB: 0x53]\r\n    0xBB: { code: 'NumpadAdd', location: NUMPAD }, // [USB: 0x57]\r\n    0xBD: { code: 'NumpadSubtract', location: NUMPAD }, // [USB: 0x56]\r\n    0xBE: { code: 'NumpadDecimal', location: NUMPAD }, // [USB: 0x63]\r\n    0xBF: { code: 'NumpadDivide', location: NUMPAD } // [USB: 0x54]\r\n  });\r\n\r\n\r\n  //--------------------------------------------------------------------\r\n  //\r\n  // Key Values\r\n  //\r\n  //--------------------------------------------------------------------\r\n\r\n  // Mapping from `code` values to `key` values. Values defined at:\r\n  // https://dvcs.w3.org/hg/dom3events/raw-file/tip/html/DOM3Events-key.html\r\n  // Entries are only provided when `key` differs from `code`. If\r\n  // printable, `shiftKey` has the shifted printable character. This\r\n  // assumes US Standard 101 layout\r\n\r\n  var codeToKeyTable = {\r\n    // Modifier Keys\r\n    ShiftLeft: { key: 'Shift' },\r\n    ShiftRight: { key: 'Shift' },\r\n    ControlLeft: { key: 'Control' },\r\n    ControlRight: { key: 'Control' },\r\n    AltLeft: { key: 'Alt' },\r\n    AltRight: { key: 'Alt' },\r\n    OSLeft: { key: 'OS' },\r\n    OSRight: { key: 'OS' },\r\n\r\n    // Whitespace Keys\r\n    NumpadEnter: { key: 'Enter' },\r\n    Space: { key: ' ' },\r\n\r\n    // Printable Keys\r\n    Digit0: { key: '0', shiftKey: ')' },\r\n    Digit1: { key: '1', shiftKey: '!' },\r\n    Digit2: { key: '2', shiftKey: '@' },\r\n    Digit3: { key: '3', shiftKey: '#' },\r\n    Digit4: { key: '4', shiftKey: '$' },\r\n    Digit5: { key: '5', shiftKey: '%' },\r\n    Digit6: { key: '6', shiftKey: '^' },\r\n    Digit7: { key: '7', shiftKey: '&' },\r\n    Digit8: { key: '8', shiftKey: '*' },\r\n    Digit9: { key: '9', shiftKey: '(' },\r\n    KeyA: { key: 'a', shiftKey: 'A' },\r\n    KeyB: { key: 'b', shiftKey: 'B' },\r\n    KeyC: { key: 'c', shiftKey: 'C' },\r\n    KeyD: { key: 'd', shiftKey: 'D' },\r\n    KeyE: { key: 'e', shiftKey: 'E' },\r\n    KeyF: { key: 'f', shiftKey: 'F' },\r\n    KeyG: { key: 'g', shiftKey: 'G' },\r\n    KeyH: { key: 'h', shiftKey: 'H' },\r\n    KeyI: { key: 'i', shiftKey: 'I' },\r\n    KeyJ: { key: 'j', shiftKey: 'J' },\r\n    KeyK: { key: 'k', shiftKey: 'K' },\r\n    KeyL: { key: 'l', shiftKey: 'L' },\r\n    KeyM: { key: 'm', shiftKey: 'M' },\r\n    KeyN: { key: 'n', shiftKey: 'N' },\r\n    KeyO: { key: 'o', shiftKey: 'O' },\r\n    KeyP: { key: 'p', shiftKey: 'P' },\r\n    KeyQ: { key: 'q', shiftKey: 'Q' },\r\n    KeyR: { key: 'r', shiftKey: 'R' },\r\n    KeyS: { key: 's', shiftKey: 'S' },\r\n    KeyT: { key: 't', shiftKey: 'T' },\r\n    KeyU: { key: 'u', shiftKey: 'U' },\r\n    KeyV: { key: 'v', shiftKey: 'V' },\r\n    KeyW: { key: 'w', shiftKey: 'W' },\r\n    KeyX: { key: 'x', shiftKey: 'X' },\r\n    KeyY: { key: 'y', shiftKey: 'Y' },\r\n    KeyZ: { key: 'z', shiftKey: 'Z' },\r\n    Numpad0: { key: '0' },\r\n    Numpad1: { key: '1' },\r\n    Numpad2: { key: '2' },\r\n    Numpad3: { key: '3' },\r\n    Numpad4: { key: '4' },\r\n    Numpad5: { key: '5' },\r\n    Numpad6: { key: '6' },\r\n    Numpad7: { key: '7' },\r\n    Numpad8: { key: '8' },\r\n    Numpad9: { key: '9' },\r\n    NumpadMultiply: { key: '*' },\r\n    NumpadAdd: { key: '+' },\r\n    NumpadComma: { key: ',' },\r\n    NumpadSubtract: { key: '-' },\r\n    NumpadDecimal: { key: '.' },\r\n    NumpadDivide: { key: '/' },\r\n    Semicolon: { key: ';', shiftKey: ':' },\r\n    Equal: { key: '=', shiftKey: '+' },\r\n    Comma: { key: ',', shiftKey: '<' },\r\n    Minus: { key: '-', shiftKey: '_' },\r\n    Period: { key: '.', shiftKey: '>' },\r\n    Slash: { key: '/', shiftKey: '?' },\r\n    Backquote: { key: '`', shiftKey: '~' },\r\n    BracketLeft: { key: '[', shiftKey: '{' },\r\n    Backslash: { key: '\\\\', shiftKey: '|' },\r\n    BracketRight: { key: ']', shiftKey: '}' },\r\n    Quote: { key: '\\'', shiftKey: '\"' },\r\n    IntlBackslash: { key: '\\\\', shiftKey: '|' }\r\n  };\r\n\r\n  mergeIf(codeToKeyTable, 'mac', {\r\n    OSLeft: { key: 'Meta' },\r\n    OSRight: { key: 'Meta' }\r\n  });\r\n\r\n  // Corrections for 'key' names in older browsers (e.g. FF36-)\r\n  // https://developer.mozilla.org/en-US/docs/Web/API/KeyboardEvent.key#Key_values\r\n  var keyFixTable = {\r\n    Esc: 'Escape',\r\n    Nonconvert: 'NonConvert',\r\n    Left: 'ArrowLeft',\r\n    Up: 'ArrowUp',\r\n    Right: 'ArrowRight',\r\n    Down: 'ArrowDown',\r\n    Del: 'Delete',\r\n    Menu: 'ContextMenu',\r\n    MediaNextTrack: 'MediaTrackNext',\r\n    MediaPreviousTrack: 'MediaTrackPrevious',\r\n    SelectMedia: 'MediaSelect',\r\n    HalfWidth: 'Hankaku',\r\n    FullWidth: 'Zenkaku',\r\n    RomanCharacters: 'Romaji',\r\n    Crsel: 'CrSel',\r\n    Exsel: 'ExSel',\r\n    Zoom: 'ZoomToggle'\r\n  };\r\n\r\n  //--------------------------------------------------------------------\r\n  //\r\n  // Exported Functions\r\n  //\r\n  //--------------------------------------------------------------------\r\n\r\n\r\n  var codeTable = remap(keyCodeToInfoTable, 'code');\r\n\r\n  try {\r\n    var nativeLocation = nativeKeyboardEvent && ('location' in new KeyboardEvent(''));\r\n  } catch (_) {}\r\n\r\n  function keyInfoForEvent(event) {\r\n    var keyCode = 'keyCode' in event ? event.keyCode : 'which' in event ? event.which : 0;\r\n\r\n    var keyInfo = (function(){\r\n      if (nativeLocation || 'keyLocation' in event) {\r\n        var location = nativeLocation ? event.location : event.keyLocation;\r\n        if (location && keyCode in locationTable[location]) {\r\n          return locationTable[location][keyCode];\r\n        }\r\n      }\r\n      if ('keyIdentifier' in event && event.keyIdentifier in keyIdentifierTable) {\r\n        return keyIdentifierTable[event.keyIdentifier];\r\n      }\r\n      if (keyCode in keyCodeToInfoTable) {\r\n        return keyCodeToInfoTable[keyCode];\r\n      }\r\n      return null;\r\n    }());\r\n\r\n    // TODO: Track these down and move to general tables\r\n    if (0) {\r\n      // TODO: Map these for newerish browsers?\r\n      // TODO: iOS only?\r\n      // TODO: Override with more common keyIdentifier name?\r\n      switch (event.keyIdentifier) {\r\n      case 'U+0010': keyInfo = { code: 'Function' }; break;\r\n      case 'U+001C': keyInfo = { code: 'ArrowLeft' }; break;\r\n      case 'U+001D': keyInfo = { code: 'ArrowRight' }; break;\r\n      case 'U+001E': keyInfo = { code: 'ArrowUp' }; break;\r\n      case 'U+001F': keyInfo = { code: 'ArrowDown' }; break;\r\n      }\r\n    }\r\n\r\n    if (!keyInfo)\r\n      return null;\r\n\r\n    var key = (function() {\r\n      var entry = codeToKeyTable[keyInfo.code];\r\n      if (!entry) return keyInfo.code;\r\n      return (event.shiftKey && 'shiftKey' in entry) ? entry.shiftKey : entry.key;\r\n    }());\r\n\r\n    return {\r\n      code: keyInfo.code,\r\n      key: key,\r\n      location: keyInfo.location,\r\n      keyCap: keyInfo.keyCap\r\n    };\r\n  }\r\n\r\n  function queryKeyCap(code, locale) {\r\n    code = String(code);\r\n    if (!codeTable.hasOwnProperty(code)) return 'Undefined';\r\n    if (locale && String(locale).toLowerCase() !== 'en-us') throw Error('Unsupported locale');\r\n    var keyInfo = codeTable[code];\r\n    return keyInfo.keyCap || keyInfo.code || 'Undefined';\r\n  }\r\n\r\n  if ('KeyboardEvent' in global && 'defineProperty' in Object) {\r\n    (function() {\r\n      function define(o, p, v) {\r\n        if (p in o) return;\r\n        Object.defineProperty(o, p, v);\r\n      }\r\n\r\n      define(KeyboardEvent.prototype, 'code', { get: function() {\r\n        var keyInfo = keyInfoForEvent(this);\r\n        return keyInfo ? keyInfo.code : '';\r\n      }});\r\n\r\n      // Fix for nonstandard `key` values (FF36-)\r\n      if ('key' in KeyboardEvent.prototype) {\r\n        var desc = Object.getOwnPropertyDescriptor(KeyboardEvent.prototype, 'key');\r\n        Object.defineProperty(KeyboardEvent.prototype, 'key', { get: function() {\r\n          var key = desc.get.call(this);\r\n          return keyFixTable.hasOwnProperty(key) ? keyFixTable[key] : key;\r\n        }});\r\n      }\r\n\r\n      define(KeyboardEvent.prototype, 'key', { get: function() {\r\n        var keyInfo = keyInfoForEvent(this);\r\n        return (keyInfo && 'key' in keyInfo) ? keyInfo.key : 'Unidentified';\r\n      }});\r\n\r\n      define(KeyboardEvent.prototype, 'location', { get: function() {\r\n        var keyInfo = keyInfoForEvent(this);\r\n        return (keyInfo && 'location' in keyInfo) ? keyInfo.location : STANDARD;\r\n      }});\r\n\r\n      define(KeyboardEvent.prototype, 'locale', { get: function() {\r\n        return '';\r\n      }});\r\n    }());\r\n  }\r\n\r\n  if (!('queryKeyCap' in global.KeyboardEvent))\r\n    global.KeyboardEvent.queryKeyCap = queryKeyCap;\r\n\r\n  // Helper for IE8-\r\n  global.identifyKey = function(event) {\r\n    if ('code' in event)\r\n      return;\r\n\r\n    var keyInfo = keyInfoForEvent(event);\r\n    event.code = keyInfo ? keyInfo.code : '';\r\n    event.key = (keyInfo && 'key' in keyInfo) ? keyInfo.key : 'Unidentified';\r\n    event.location = ('location' in event) ? event.location :\r\n      ('keyLocation' in event) ? event.keyLocation :\r\n      (keyInfo && 'location' in keyInfo) ? keyInfo.location : STANDARD;\r\n    event.locale = '';\r\n  };\r\n\r\n} (window));\r\n","!function(t,i){\"object\"==typeof exports&&\"object\"==typeof module?module.exports=i():\"function\"==typeof define&&define.amd?define(\"nipplejs\",[],i):\"object\"==typeof exports?exports.nipplejs=i():t.nipplejs=i()}(window,function(){return function(t){var i={};function e(o){if(i[o])return i[o].exports;var n=i[o]={i:o,l:!1,exports:{}};return t[o].call(n.exports,n,n.exports,e),n.l=!0,n.exports}return e.m=t,e.c=i,e.d=function(t,i,o){e.o(t,i)||Object.defineProperty(t,i,{enumerable:!0,get:o})},e.r=function(t){\"undefined\"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(t,Symbol.toStringTag,{value:\"Module\"}),Object.defineProperty(t,\"__esModule\",{value:!0})},e.t=function(t,i){if(1&i&&(t=e(t)),8&i)return t;if(4&i&&\"object\"==typeof t&&t&&t.__esModule)return t;var o=Object.create(null);if(e.r(o),Object.defineProperty(o,\"default\",{enumerable:!0,value:t}),2&i&&\"string\"!=typeof t)for(var n in t)e.d(o,n,function(i){return t[i]}.bind(null,n));return o},e.n=function(t){var i=t&&t.__esModule?function(){return t.default}:function(){return t};return e.d(i,\"a\",i),i},e.o=function(t,i){return Object.prototype.hasOwnProperty.call(t,i)},e.p=\"\",e(e.s=0)}([function(t,i,e){\"use strict\";e.r(i);var o,n=function(t,i){var e=i.x-t.x,o=i.y-t.y;return Math.sqrt(e*e+o*o)},s=function(t){return t*(Math.PI/180)},r=function(t){return t*(180/Math.PI)},d=new Map,a=function(t){d.has(t)&&clearTimeout(d.get(t)),d.set(t,setTimeout(t,100))},p=function(t,i,e){for(var o,n=i.split(/[ ,]+/g),s=0;s<n.length;s+=1)o=n[s],t.addEventListener?t.addEventListener(o,e,!1):t.attachEvent&&t.attachEvent(o,e)},c=function(t,i,e){for(var o,n=i.split(/[ ,]+/g),s=0;s<n.length;s+=1)o=n[s],t.removeEventListener?t.removeEventListener(o,e):t.detachEvent&&t.detachEvent(o,e)},l=function(t){return t.preventDefault(),t.type.match(/^touch/)?t.changedTouches:t},h=function(){return{x:void 0!==window.pageXOffset?window.pageXOffset:(document.documentElement||document.body.parentNode||document.body).scrollLeft,y:void 0!==window.pageYOffset?window.pageYOffset:(document.documentElement||document.body.parentNode||document.body).scrollTop}},u=function(t,i){i.top||i.right||i.bottom||i.left?(t.style.top=i.top,t.style.right=i.right,t.style.bottom=i.bottom,t.style.left=i.left):(t.style.left=i.x+\"px\",t.style.top=i.y+\"px\")},f=function(t,i,e){var o=y(t);for(var n in o)if(o.hasOwnProperty(n))if(\"string\"==typeof i)o[n]=i+\" \"+e;else{for(var s=\"\",r=0,d=i.length;r<d;r+=1)s+=i[r]+\" \"+e+\", \";o[n]=s.slice(0,-2)}return o},y=function(t){var i={};i[t]=\"\";return[\"webkit\",\"Moz\",\"o\"].forEach(function(e){i[e+t.charAt(0).toUpperCase()+t.slice(1)]=\"\"}),i},m=function(t,i){for(var e in i)i.hasOwnProperty(e)&&(t[e]=i[e]);return t},v=function(t,i){if(t.length)for(var e=0,o=t.length;e<o;e+=1)i(t[e]);else i(t)},g=!!(\"ontouchstart\"in window),b=!!window.PointerEvent,x=!!window.MSPointerEvent,O={start:\"mousedown\",move:\"mousemove\",end:\"mouseup\"},w={};function _(){}b?o={start:\"pointerdown\",move:\"pointermove\",end:\"pointerup, pointercancel\"}:x?o={start:\"MSPointerDown\",move:\"MSPointerMove\",end:\"MSPointerUp\"}:g?(o={start:\"touchstart\",move:\"touchmove\",end:\"touchend, touchcancel\"},w=O):o=O,_.prototype.on=function(t,i){var e,o=t.split(/[ ,]+/g);this._handlers_=this._handlers_||{};for(var n=0;n<o.length;n+=1)e=o[n],this._handlers_[e]=this._handlers_[e]||[],this._handlers_[e].push(i);return this},_.prototype.off=function(t,i){return this._handlers_=this._handlers_||{},void 0===t?this._handlers_={}:void 0===i?this._handlers_[t]=null:this._handlers_[t]&&this._handlers_[t].indexOf(i)>=0&&this._handlers_[t].splice(this._handlers_[t].indexOf(i),1),this},_.prototype.trigger=function(t,i){var e,o=this,n=t.split(/[ ,]+/g);o._handlers_=o._handlers_||{};for(var s=0;s<n.length;s+=1)e=n[s],o._handlers_[e]&&o._handlers_[e].length&&o._handlers_[e].forEach(function(t){t.call(o,{type:e,target:o},i)})},_.prototype.config=function(t){this.options=this.defaults||{},t&&(this.options=function(t,i){var e={};for(var o in t)t.hasOwnProperty(o)&&i.hasOwnProperty(o)?e[o]=i[o]:t.hasOwnProperty(o)&&(e[o]=t[o]);return e}(this.options,t))},_.prototype.bindEvt=function(t,i){var e=this;return e._domHandlers_=e._domHandlers_||{},e._domHandlers_[i]=function(){\"function\"==typeof e[\"on\"+i]?e[\"on\"+i].apply(e,arguments):console.warn('[WARNING] : Missing \"on'+i+'\" handler.')},p(t,o[i],e._domHandlers_[i]),w[i]&&p(t,w[i],e._domHandlers_[i]),e},_.prototype.unbindEvt=function(t,i){return this._domHandlers_=this._domHandlers_||{},c(t,o[i],this._domHandlers_[i]),w[i]&&c(t,w[i],this._domHandlers_[i]),delete this._domHandlers_[i],this};var T=_;function k(t,i){return this.identifier=i.identifier,this.position=i.position,this.frontPosition=i.frontPosition,this.collection=t,this.defaults={size:100,threshold:.1,color:\"white\",fadeTime:250,dataOnly:!1,restJoystick:!0,restOpacity:.5,mode:\"dynamic\",zone:document.body,lockX:!1,lockY:!1,shape:\"circle\"},this.config(i),\"dynamic\"===this.options.mode&&(this.options.restOpacity=0),this.id=k.id,k.id+=1,this.buildEl().stylize(),this.instance={el:this.ui.el,on:this.on.bind(this),off:this.off.bind(this),show:this.show.bind(this),hide:this.hide.bind(this),add:this.addToDom.bind(this),remove:this.removeFromDom.bind(this),destroy:this.destroy.bind(this),setPosition:this.setPosition.bind(this),resetDirection:this.resetDirection.bind(this),computeDirection:this.computeDirection.bind(this),trigger:this.trigger.bind(this),position:this.position,frontPosition:this.frontPosition,ui:this.ui,identifier:this.identifier,id:this.id,options:this.options},this.instance}k.prototype=new T,k.constructor=k,k.id=0,k.prototype.buildEl=function(t){return this.ui={},this.options.dataOnly?this:(this.ui.el=document.createElement(\"div\"),this.ui.back=document.createElement(\"div\"),this.ui.front=document.createElement(\"div\"),this.ui.el.className=\"nipple collection_\"+this.collection.id,this.ui.back.className=\"back\",this.ui.front.className=\"front\",this.ui.el.setAttribute(\"id\",\"nipple_\"+this.collection.id+\"_\"+this.id),this.ui.el.appendChild(this.ui.back),this.ui.el.appendChild(this.ui.front),this)},k.prototype.stylize=function(){if(this.options.dataOnly)return this;var t=this.options.fadeTime+\"ms\",i=function(t,i){var e=y(t);for(var o in e)e.hasOwnProperty(o)&&(e[o]=i);return e}(\"borderRadius\",\"50%\"),e=f(\"transition\",\"opacity\",t),o={};return o.el={position:\"absolute\",opacity:this.options.restOpacity,display:\"block\",zIndex:999},o.back={position:\"absolute\",display:\"block\",width:this.options.size+\"px\",height:this.options.size+\"px\",left:0,marginLeft:-this.options.size/2+\"px\",marginTop:-this.options.size/2+\"px\",background:this.options.color,opacity:\".5\"},o.front={width:this.options.size/2+\"px\",height:this.options.size/2+\"px\",position:\"absolute\",display:\"block\",left:0,marginLeft:-this.options.size/4+\"px\",marginTop:-this.options.size/4+\"px\",background:this.options.color,opacity:\".5\",transform:\"translate(0px, 0px)\"},m(o.el,e),\"circle\"===this.options.shape&&m(o.back,i),m(o.front,i),this.applyStyles(o),this},k.prototype.applyStyles=function(t){for(var i in this.ui)if(this.ui.hasOwnProperty(i))for(var e in t[i])this.ui[i].style[e]=t[i][e];return this},k.prototype.addToDom=function(){return this.options.dataOnly||document.body.contains(this.ui.el)?this:(this.options.zone.appendChild(this.ui.el),this)},k.prototype.removeFromDom=function(){return this.options.dataOnly||!document.body.contains(this.ui.el)?this:(this.options.zone.removeChild(this.ui.el),this)},k.prototype.destroy=function(){clearTimeout(this.removeTimeout),clearTimeout(this.showTimeout),clearTimeout(this.restTimeout),this.trigger(\"destroyed\",this.instance),this.removeFromDom(),this.off()},k.prototype.show=function(t){var i=this;return i.options.dataOnly?i:(clearTimeout(i.removeTimeout),clearTimeout(i.showTimeout),clearTimeout(i.restTimeout),i.addToDom(),i.restCallback(),setTimeout(function(){i.ui.el.style.opacity=1},0),i.showTimeout=setTimeout(function(){i.trigger(\"shown\",i.instance),\"function\"==typeof t&&t.call(this)},i.options.fadeTime),i)},k.prototype.hide=function(t){var i=this;if(i.options.dataOnly)return i;if(i.ui.el.style.opacity=i.options.restOpacity,clearTimeout(i.removeTimeout),clearTimeout(i.showTimeout),clearTimeout(i.restTimeout),i.removeTimeout=setTimeout(function(){var e=\"dynamic\"===i.options.mode?\"none\":\"block\";i.ui.el.style.display=e,\"function\"==typeof t&&t.call(i),i.trigger(\"hidden\",i.instance)},i.options.fadeTime),i.options.restJoystick){var e=i.options.restJoystick,o={};o.x=!0===e||!1!==e.x?0:i.instance.frontPosition.x,o.y=!0===e||!1!==e.y?0:i.instance.frontPosition.y,i.setPosition(t,o)}return i},k.prototype.setPosition=function(t,i){var e=this;e.frontPosition={x:i.x,y:i.y};var o=e.options.fadeTime+\"ms\",n={};n.front=f(\"transition\",[\"transform\"],o);var s={front:{}};s.front={transform:\"translate(\"+e.frontPosition.x+\"px,\"+e.frontPosition.y+\"px)\"},e.applyStyles(n),e.applyStyles(s),e.restTimeout=setTimeout(function(){\"function\"==typeof t&&t.call(e),e.restCallback()},e.options.fadeTime)},k.prototype.restCallback=function(){var t={};t.front=f(\"transition\",\"none\",\"\"),this.applyStyles(t),this.trigger(\"rested\",this.instance)},k.prototype.resetDirection=function(){this.direction={x:!1,y:!1,angle:!1}},k.prototype.computeDirection=function(t){var i,e,o,n=t.angle.radian,s=Math.PI/4,r=Math.PI/2;if(n>s&&n<3*s&&!t.lockX?i=\"up\":n>-s&&n<=s&&!t.lockY?i=\"left\":n>3*-s&&n<=-s&&!t.lockX?i=\"down\":t.lockY||(i=\"right\"),t.lockY||(e=n>-r&&n<r?\"left\":\"right\"),t.lockX||(o=n>0?\"up\":\"down\"),t.force>this.options.threshold){var d,a={};for(d in this.direction)this.direction.hasOwnProperty(d)&&(a[d]=this.direction[d]);var p={};for(d in this.direction={x:e,y:o,angle:i},t.direction=this.direction,a)a[d]===this.direction[d]&&(p[d]=!0);if(p.x&&p.y&&p.angle)return t;p.x&&p.y||this.trigger(\"plain\",t),p.x||this.trigger(\"plain:\"+e,t),p.y||this.trigger(\"plain:\"+o,t),p.angle||this.trigger(\"dir dir:\"+i,t)}else this.resetDirection();return t};var P=k;function E(t,i){this.nipples=[],this.idles=[],this.actives=[],this.ids=[],this.pressureIntervals={},this.manager=t,this.id=E.id,E.id+=1,this.defaults={zone:document.body,multitouch:!1,maxNumberOfNipples:10,mode:\"dynamic\",position:{top:0,left:0},catchDistance:200,size:100,threshold:.1,color:\"white\",fadeTime:250,dataOnly:!1,restJoystick:!0,restOpacity:.5,lockX:!1,lockY:!1,shape:\"circle\",dynamicPage:!1,follow:!1},this.config(i),\"static\"!==this.options.mode&&\"semi\"!==this.options.mode||(this.options.multitouch=!1),this.options.multitouch||(this.options.maxNumberOfNipples=1);var e=getComputedStyle(this.options.zone.parentElement);return e&&\"flex\"===e.display&&(this.parentIsFlex=!0),this.updateBox(),this.prepareNipples(),this.bindings(),this.begin(),this.nipples}E.prototype=new T,E.constructor=E,E.id=0,E.prototype.prepareNipples=function(){var t=this.nipples;t.on=this.on.bind(this),t.off=this.off.bind(this),t.options=this.options,t.destroy=this.destroy.bind(this),t.ids=this.ids,t.id=this.id,t.processOnMove=this.processOnMove.bind(this),t.processOnEnd=this.processOnEnd.bind(this),t.get=function(i){if(void 0===i)return t[0];for(var e=0,o=t.length;e<o;e+=1)if(t[e].identifier===i)return t[e];return!1}},E.prototype.bindings=function(){this.bindEvt(this.options.zone,\"start\"),this.options.zone.style.touchAction=\"none\",this.options.zone.style.msTouchAction=\"none\"},E.prototype.begin=function(){var t=this.options;if(\"static\"===t.mode){var i=this.createNipple(t.position,this.manager.getIdentifier());i.add(),this.idles.push(i)}},E.prototype.createNipple=function(t,i){var e=this.manager.scroll,o={},n=this.options,s=this.parentIsFlex?e.x:e.x+this.box.left,r=this.parentIsFlex?e.y:e.y+this.box.top;if(t.x&&t.y)o={x:t.x-s,y:t.y-r};else if(t.top||t.right||t.bottom||t.left){var d=document.createElement(\"DIV\");d.style.display=\"hidden\",d.style.top=t.top,d.style.right=t.right,d.style.bottom=t.bottom,d.style.left=t.left,d.style.position=\"absolute\",n.zone.appendChild(d);var a=d.getBoundingClientRect();n.zone.removeChild(d),o=t,t={x:a.left+e.x,y:a.top+e.y}}var p=new P(this,{color:n.color,size:n.size,threshold:n.threshold,fadeTime:n.fadeTime,dataOnly:n.dataOnly,restJoystick:n.restJoystick,restOpacity:n.restOpacity,mode:n.mode,identifier:i,position:t,zone:n.zone,frontPosition:{x:0,y:0},shape:n.shape});return n.dataOnly||(u(p.ui.el,o),u(p.ui.front,p.frontPosition)),this.nipples.push(p),this.trigger(\"added \"+p.identifier+\":added\",p),this.manager.trigger(\"added \"+p.identifier+\":added\",p),this.bindNipple(p),p},E.prototype.updateBox=function(){this.box=this.options.zone.getBoundingClientRect()},E.prototype.bindNipple=function(t){var i,e=this,o=function(t,o){i=t.type+\" \"+o.id+\":\"+t.type,e.trigger(i,o)};t.on(\"destroyed\",e.onDestroyed.bind(e)),t.on(\"shown hidden rested dir plain\",o),t.on(\"dir:up dir:right dir:down dir:left\",o),t.on(\"plain:up plain:right plain:down plain:left\",o)},E.prototype.pressureFn=function(t,i,e){var o=this,n=0;clearInterval(o.pressureIntervals[e]),o.pressureIntervals[e]=setInterval(function(){var e=t.force||t.pressure||t.webkitForce||0;e!==n&&(i.trigger(\"pressure\",e),o.trigger(\"pressure \"+i.identifier+\":pressure\",e),n=e)}.bind(o),100)},E.prototype.onstart=function(t){var i=this,e=i.options,o=t;t=l(t),i.updateBox();return v(t,function(n){i.actives.length<e.maxNumberOfNipples?i.processOnStart(n):o.type.match(/^touch/)&&(Object.keys(i.manager.ids).forEach(function(e){if(Object.values(o.touches).findIndex(function(t){return t.identifier===e})<0){var n=[t[0]];n.identifier=e,i.processOnEnd(n)}}),i.actives.length<e.maxNumberOfNipples&&i.processOnStart(n))}),i.manager.bindDocument(),!1},E.prototype.processOnStart=function(t){var i,e=this,o=e.options,s=e.manager.getIdentifier(t),r=t.force||t.pressure||t.webkitForce||0,d={x:t.pageX,y:t.pageY},a=e.getOrCreate(s,d);a.identifier!==s&&e.manager.removeIdentifier(a.identifier),a.identifier=s;var p=function(i){i.trigger(\"start\",i),e.trigger(\"start \"+i.id+\":start\",i),i.show(),r>0&&e.pressureFn(t,i,i.identifier),e.processOnMove(t)};if((i=e.idles.indexOf(a))>=0&&e.idles.splice(i,1),e.actives.push(a),e.ids.push(a.identifier),\"semi\"!==o.mode)p(a);else{if(!(n(d,a.position)<=o.catchDistance))return a.destroy(),void e.processOnStart(t);p(a)}return a},E.prototype.getOrCreate=function(t,i){var e,o=this.options;return/(semi|static)/.test(o.mode)?(e=this.idles[0])?(this.idles.splice(0,1),e):\"semi\"===o.mode?this.createNipple(i,t):(console.warn(\"Coudln't find the needed nipple.\"),!1):e=this.createNipple(i,t)},E.prototype.processOnMove=function(t){var i=this.options,e=this.manager.getIdentifier(t),o=this.nipples.get(e),d=this.manager.scroll;if(function(t){return isNaN(t.buttons)?0!==t.pressure:0!==t.buttons}(t)){if(!o)return console.error(\"Found zombie joystick with ID \"+e),void this.manager.removeIdentifier(e);if(i.dynamicPage){var a=o.el.getBoundingClientRect();o.position={x:d.x+a.left,y:d.y+a.top}}o.identifier=e;var p=o.options.size/2,c={x:t.pageX,y:t.pageY};i.lockX&&(c.y=o.position.y),i.lockY&&(c.x=o.position.x);var l,h,u,f,y,m,v,g,b,x,O=n(c,o.position),w=(l=c,h=o.position,u=h.x-l.x,f=h.y-l.y,r(Math.atan2(f,u))),_=s(w),T=O/p,k={distance:O,position:c};if(\"circle\"===o.options.shape?(y=Math.min(O,p),v=o.position,g=y,x={x:0,y:0},b=s(b=w),x.x=v.x-g*Math.cos(b),x.y=v.y-g*Math.sin(b),m=x):(m=function(t,i,e){return{x:Math.min(Math.max(t.x,i.x-e),i.x+e),y:Math.min(Math.max(t.y,i.y-e),i.y+e)}}(c,o.position,p),y=n(m,o.position)),i.follow){if(O>p){var P=c.x-m.x,E=c.y-m.y;o.position.x+=P,o.position.y+=E,o.el.style.top=o.position.y-(this.box.top+d.y)+\"px\",o.el.style.left=o.position.x-(this.box.left+d.x)+\"px\",O=n(c,o.position)}}else c=m,O=y;var I=c.x-o.position.x,z=c.y-o.position.y;o.frontPosition={x:I,y:z},i.dataOnly||(o.ui.front.style.transform=\"translate(\"+I+\"px,\"+z+\"px)\");var D={identifier:o.identifier,position:c,force:T,pressure:t.force||t.pressure||t.webkitForce||0,distance:O,angle:{radian:_,degree:w},vector:{x:I/p,y:-z/p},raw:k,instance:o,lockX:i.lockX,lockY:i.lockY};(D=o.computeDirection(D)).angle={radian:s(180-w),degree:180-w},o.trigger(\"move\",D),this.trigger(\"move \"+o.id+\":move\",D)}else this.processOnEnd(t)},E.prototype.processOnEnd=function(t){var i=this,e=i.options,o=i.manager.getIdentifier(t),n=i.nipples.get(o),s=i.manager.removeIdentifier(n.identifier);n&&(e.dataOnly||n.hide(function(){\"dynamic\"===e.mode&&(n.trigger(\"removed\",n),i.trigger(\"removed \"+n.id+\":removed\",n),i.manager.trigger(\"removed \"+n.id+\":removed\",n),n.destroy())}),clearInterval(i.pressureIntervals[n.identifier]),n.resetDirection(),n.trigger(\"end\",n),i.trigger(\"end \"+n.id+\":end\",n),i.ids.indexOf(n.identifier)>=0&&i.ids.splice(i.ids.indexOf(n.identifier),1),i.actives.indexOf(n)>=0&&i.actives.splice(i.actives.indexOf(n),1),/(semi|static)/.test(e.mode)?i.idles.push(n):i.nipples.indexOf(n)>=0&&i.nipples.splice(i.nipples.indexOf(n),1),i.manager.unbindDocument(),/(semi|static)/.test(e.mode)&&(i.manager.ids[s.id]=s.identifier))},E.prototype.onDestroyed=function(t,i){this.nipples.indexOf(i)>=0&&this.nipples.splice(this.nipples.indexOf(i),1),this.actives.indexOf(i)>=0&&this.actives.splice(this.actives.indexOf(i),1),this.idles.indexOf(i)>=0&&this.idles.splice(this.idles.indexOf(i),1),this.ids.indexOf(i.identifier)>=0&&this.ids.splice(this.ids.indexOf(i.identifier),1),this.manager.removeIdentifier(i.identifier),this.manager.unbindDocument()},E.prototype.destroy=function(){for(var t in this.unbindEvt(this.options.zone,\"start\"),this.nipples.forEach(function(t){t.destroy()}),this.pressureIntervals)this.pressureIntervals.hasOwnProperty(t)&&clearInterval(this.pressureIntervals[t]);this.trigger(\"destroyed\",this.nipples),this.manager.unbindDocument(),this.off()};var I=E;function z(t){var i=this;i.ids={},i.index=0,i.collections=[],i.scroll=h(),i.config(t),i.prepareCollections();var e=function(){var t;i.collections.forEach(function(e){e.forEach(function(e){t=e.el.getBoundingClientRect(),e.position={x:i.scroll.x+t.left,y:i.scroll.y+t.top}})})};p(window,\"resize\",function(){a(e)});var o=function(){i.scroll=h()};return p(window,\"scroll\",function(){a(o)}),i.collections}z.prototype=new T,z.constructor=z,z.prototype.prepareCollections=function(){var t=this;t.collections.create=t.create.bind(t),t.collections.on=t.on.bind(t),t.collections.off=t.off.bind(t),t.collections.destroy=t.destroy.bind(t),t.collections.get=function(i){var e;return t.collections.every(function(t){return!(e=t.get(i))}),e}},z.prototype.create=function(t){return this.createCollection(t)},z.prototype.createCollection=function(t){var i=new I(this,t);return this.bindCollection(i),this.collections.push(i),i},z.prototype.bindCollection=function(t){var i,e=this,o=function(t,o){i=t.type+\" \"+o.id+\":\"+t.type,e.trigger(i,o)};t.on(\"destroyed\",e.onDestroyed.bind(e)),t.on(\"shown hidden rested dir plain\",o),t.on(\"dir:up dir:right dir:down dir:left\",o),t.on(\"plain:up plain:right plain:down plain:left\",o)},z.prototype.bindDocument=function(){this.binded||(this.bindEvt(document,\"move\").bindEvt(document,\"end\"),this.binded=!0)},z.prototype.unbindDocument=function(t){Object.keys(this.ids).length&&!0!==t||(this.unbindEvt(document,\"move\").unbindEvt(document,\"end\"),this.binded=!1)},z.prototype.getIdentifier=function(t){var i;return t?void 0===(i=void 0===t.identifier?t.pointerId:t.identifier)&&(i=this.latest||0):i=this.index,void 0===this.ids[i]&&(this.ids[i]=this.index,this.index+=1),this.latest=i,this.ids[i]},z.prototype.removeIdentifier=function(t){var i={};for(var e in this.ids)if(this.ids[e]===t){i.id=e,i.identifier=this.ids[e],delete this.ids[e];break}return i},z.prototype.onmove=function(t){return this.onAny(\"move\",t),!1},z.prototype.onend=function(t){return this.onAny(\"end\",t),!1},z.prototype.oncancel=function(t){return this.onAny(\"end\",t),!1},z.prototype.onAny=function(t,i){var e,o=this,n=\"processOn\"+t.charAt(0).toUpperCase()+t.slice(1);i=l(i);return v(i,function(t){e=o.getIdentifier(t),v(o.collections,function(t,i,e){e.ids.indexOf(i)>=0&&(e[n](t),t._found_=!0)}.bind(null,t,e)),t._found_||o.removeIdentifier(e)}),!1},z.prototype.destroy=function(){this.unbindDocument(!0),this.ids={},this.index=0,this.collections.forEach(function(t){t.destroy()}),this.off()},z.prototype.onDestroyed=function(t,i){if(this.collections.indexOf(i)<0)return!1;this.collections.splice(this.collections.indexOf(i),1)};var D=new z;i.default={create:function(t){return D.create(t)},factory:D}}]).default});","const EPS = 0.1;\r\n\r\nmodule.exports = AFRAME.registerComponent('checkpoint-controls', {\r\n  schema: {\r\n    enabled: {default: true},\r\n    mode: {default: 'teleport', oneOf: ['teleport', 'animate']},\r\n    animateSpeed: {default: 3.0}\r\n  },\r\n\r\n  init: function () {\r\n    this.active = true;\r\n    this.checkpoint = null;\r\n\r\n    this.isNavMeshConstrained = false;\r\n\r\n    this.offset = new THREE.Vector3();\r\n    this.position = new THREE.Vector3();\r\n    this.targetPosition = new THREE.Vector3();\r\n  },\r\n\r\n  play: function () { this.active = true; },\r\n  pause: function () { this.active = false; },\r\n\r\n  setCheckpoint: function (checkpoint) {\r\n    const el = this.el;\r\n\r\n    if (!this.active) return;\r\n    if (this.checkpoint === checkpoint) return;\r\n\r\n    if (this.checkpoint) {\r\n      el.emit('navigation-end', {checkpoint: this.checkpoint});\r\n    }\r\n\r\n    this.checkpoint = checkpoint;\r\n    this.sync();\r\n\r\n    // Ignore new checkpoint if we're already there.\r\n    if (this.position.distanceTo(this.targetPosition) < EPS) {\r\n      this.checkpoint = null;\r\n      return;\r\n    }\r\n\r\n    el.emit('navigation-start', {checkpoint: checkpoint});\r\n\r\n    if (this.data.mode === 'teleport') {\r\n      this.el.setAttribute('position', this.targetPosition);\r\n      this.checkpoint = null;\r\n      el.emit('navigation-end', {checkpoint: checkpoint});\r\n      el.components['movement-controls'].updateNavLocation();\r\n    }\r\n  },\r\n\r\n  isVelocityActive: function () {\r\n    return !!(this.active && this.checkpoint);\r\n  },\r\n\r\n  getVelocity: function () {\r\n    if (!this.active) return;\r\n\r\n    const data = this.data;\r\n    const offset = this.offset;\r\n    const position = this.position;\r\n    const targetPosition = this.targetPosition;\r\n    const checkpoint = this.checkpoint;\r\n\r\n    this.sync();\r\n    if (position.distanceTo(targetPosition) < EPS) {\r\n      this.checkpoint = null;\r\n      this.el.emit('navigation-end', {checkpoint: checkpoint});\r\n      return offset.set(0, 0, 0);\r\n    }\r\n    offset.setLength(data.animateSpeed);\r\n    return offset;\r\n  },\r\n\r\n  sync: function () {\r\n    const offset = this.offset;\r\n    const position = this.position;\r\n    const targetPosition = this.targetPosition;\r\n\r\n    position.copy(this.el.getAttribute('position'));\r\n    this.checkpoint.object3D.getWorldPosition(targetPosition);\r\n    targetPosition.add(this.checkpoint.components.checkpoint.getOffset());\r\n    offset.copy(targetPosition).sub(position);\r\n  }\r\n});\r\n","/**\r\n * Gamepad controls for A-Frame.\r\n *\r\n * Stripped-down version of: https://github.com/donmccurdy/aframe-gamepad-controls\r\n *\r\n * For more information about the Gamepad API, see:\r\n * https://developer.mozilla.org/en-US/docs/Web/API/Gamepad_API/Using_the_Gamepad_API\r\n */\r\n\r\nconst GamepadButton = require('../../lib/GamepadButton'),\r\n    GamepadButtonEvent = require('../../lib/GamepadButtonEvent');\r\n\r\nconst JOYSTICK_EPS = 0.2;\r\n\r\nconst Hand = {\r\n  LEFT: 'left',\r\n  RIGHT: 'right'\r\n};\r\n\r\nconst Joystick = {\r\n  MOVEMENT: 1,\r\n  ROTATION: 2\r\n};\r\n\r\nmodule.exports = AFRAME.registerComponent('gamepad-controls', {\r\n\r\n  /*******************************************************************\r\n   * Statics\r\n   */\r\n\r\n  GamepadButton: GamepadButton,\r\n\r\n  /*******************************************************************\r\n   * Schema\r\n   */\r\n\r\n  schema: {\r\n    // Enable/disable gamepad-controls\r\n    enabled: { default: true },\r\n\r\n    // Rotation sensitivity\r\n    rotationSensitivity: { default: 2.0 },\r\n  },\r\n\r\n  /*******************************************************************\r\n   * Core\r\n   */\r\n\r\n  /**\r\n   * Called once when component is attached. Generally for initial setup.\r\n   */\r\n  init: function () {\r\n    const sceneEl = this.el.sceneEl;\r\n\r\n    // tracked-controls-webxr was renamed to tracked-controls in aframe 1.7.0\r\n    // tracked-controls-webxr is for aframe 1.6.0 and below\r\n    this.system = sceneEl.systems['tracked-controls'] || sceneEl.systems['tracked-controls-webxr'] || {controllers: []};\r\n\r\n    this.prevTime = window.performance.now();\r\n\r\n    // Button state\r\n    this.buttons = {};\r\n\r\n    // Rotation\r\n    const rotation = this.el.object3D.rotation;\r\n    this.pitch = new THREE.Object3D();\r\n    this.pitch.rotation.x = rotation.x;\r\n    this.yaw = new THREE.Object3D();\r\n    this.yaw.position.y = 10;\r\n    this.yaw.rotation.y = rotation.y;\r\n    this.yaw.add(this.pitch);\r\n\r\n    this._lookVector = new THREE.Vector2();\r\n    this._moveVector = new THREE.Vector2();\r\n    this._dpadVector = new THREE.Vector2();\r\n\r\n    sceneEl.addBehavior(this);\r\n  },\r\n\r\n  /**\r\n   * Called when component is attached and when component data changes.\r\n   * Generally modifies the entity based on the data.\r\n   */\r\n  update: function () { this.tick(); },\r\n\r\n  /**\r\n   * Called on each iteration of main render loop.\r\n   */\r\n  tick: function (t, dt) {\r\n    this.updateButtonState();\r\n    this.updateRotation(dt);\r\n  },\r\n\r\n  /**\r\n   * Called when a component is removed (e.g., via removeAttribute).\r\n   * Generally undoes all modifications to the entity.\r\n   */\r\n  remove: function () { },\r\n\r\n  /*******************************************************************\r\n   * Movement\r\n   */\r\n\r\n  isVelocityActive: function () {\r\n    if (!this.data.enabled || !this.isConnected()) return false;\r\n\r\n    const dpad = this._dpadVector;\r\n    const joystick = this._moveVector;\r\n\r\n    this.getDpad(dpad);\r\n    this.getJoystick(Joystick.MOVEMENT, joystick);\r\n\r\n    const inputX = dpad.x || joystick.x;\r\n    const inputY = dpad.y || joystick.y;\r\n\r\n    return Math.abs(inputX) > JOYSTICK_EPS || Math.abs(inputY) > JOYSTICK_EPS;\r\n  },\r\n\r\n  getVelocityDelta: function () {\r\n    const dpad = this._dpadVector;\r\n    const joystick = this._moveVector;\r\n\r\n    this.getDpad(dpad);\r\n    this.getJoystick(Joystick.MOVEMENT, joystick);\r\n\r\n    const inputX = dpad.x || joystick.x;\r\n    const inputY = dpad.y || joystick.y;\r\n    const dVelocity = new THREE.Vector3();\r\n\r\n    if (Math.abs(inputX) > JOYSTICK_EPS) {\r\n      dVelocity.x += inputX;\r\n    }\r\n    if (Math.abs(inputY) > JOYSTICK_EPS) {\r\n      dVelocity.z += inputY;\r\n    }\r\n\r\n    return dVelocity;\r\n  },\r\n\r\n  /*******************************************************************\r\n   * Rotation\r\n   */\r\n\r\n  isRotationActive: function () {\r\n    if (!this.data.enabled || !this.isConnected()) return false;\r\n\r\n    const joystick = this._lookVector;\r\n\r\n    this.getJoystick(Joystick.ROTATION, joystick);\r\n\r\n    return Math.abs(joystick.x) > JOYSTICK_EPS || Math.abs(joystick.y) > JOYSTICK_EPS;\r\n  },\r\n\r\n  updateRotation: function (dt) {\r\n    if (!this.isRotationActive()) return;\r\n\r\n    const data = this.data;\r\n    const yaw = this.yaw;\r\n    const pitch = this.pitch;\r\n\r\n    // First copy camera rig pitch/yaw, it may have been changed from\r\n    // another component.\r\n    yaw.rotation.y = this.el.object3D.rotation.y;\r\n    pitch.rotation.x = this.el.object3D.rotation.x;\r\n\r\n    const lookVector = this._lookVector;\r\n\r\n    this.getJoystick(Joystick.ROTATION, lookVector);\r\n\r\n    if (Math.abs(lookVector.x) <= JOYSTICK_EPS) lookVector.x = 0;\r\n    if (Math.abs(lookVector.y) <= JOYSTICK_EPS) lookVector.y = 0;\r\n\r\n    lookVector.multiplyScalar(data.rotationSensitivity * dt / 1000);\r\n    yaw.rotation.y -= lookVector.x;\r\n    pitch.rotation.x -= lookVector.y;\r\n    pitch.rotation.x = Math.max(- Math.PI / 2, Math.min(Math.PI / 2, pitch.rotation.x));\r\n    this.el.object3D.rotation.set(pitch.rotation.x, yaw.rotation.y, 0);\r\n  },\r\n\r\n  /*******************************************************************\r\n   * Button events\r\n   */\r\n\r\n  updateButtonState: function () {\r\n    const gamepad = this.getGamepad(Hand.RIGHT);\r\n    if (this.data.enabled && gamepad) {\r\n\r\n      // Fire DOM events for button state changes.\r\n      for (var i = 0; i < gamepad.buttons.length; i++) {\r\n        if (gamepad.buttons[i].pressed && !this.buttons[i]) {\r\n          this.emit(new GamepadButtonEvent('gamepadbuttondown', i, gamepad.buttons[i]));\r\n        } else if (!gamepad.buttons[i].pressed && this.buttons[i]) {\r\n          this.emit(new GamepadButtonEvent('gamepadbuttonup', i, gamepad.buttons[i]));\r\n        }\r\n        this.buttons[i] = gamepad.buttons[i].pressed;\r\n      }\r\n\r\n    } else {\r\n      // Reset state if controls are disabled or controller is lost.\r\n      for (const key in this.buttons) { this.buttons[key] = false; }\r\n    }\r\n  },\r\n\r\n  emit: function (event) {\r\n    // Emit original event.\r\n    this.el.emit(event.type, event);\r\n\r\n    // Emit convenience event, identifying button index.\r\n    this.el.emit(\r\n      event.type + ':' + event.index,\r\n      new GamepadButtonEvent(event.type, event.index, event)\r\n    );\r\n  },\r\n\r\n  /*******************************************************************\r\n   * Gamepad state\r\n   */\r\n\r\n  /**\r\n   * Returns the Gamepad instance attached to the component. If connected,\r\n   * a proxy-controls component may provide access to Gamepad input from a\r\n   * remote device.\r\n   *\r\n   * @param {string} handPreference\r\n   * @return {Gamepad}\r\n   */\r\n  getGamepad: (function () {\r\n    const _xrGamepads = [];\r\n    const _empty = [];\r\n\r\n    return function (handPreference) {\r\n      // https://github.com/donmccurdy/aframe-proxy-controls\r\n      const proxyControls = this.el.sceneEl.components['proxy-controls'];\r\n      const proxyGamepad = proxyControls && proxyControls.isConnected()\r\n        && proxyControls.getGamepad(0);\r\n      if (proxyGamepad) return proxyGamepad;\r\n\r\n      // https://www.w3.org/TR/webxr/#dom-xrinputsource-handedness\r\n      _xrGamepads.length = 0;\r\n      for (let i = 0; i < this.system.controllers.length; i++) {\r\n        const xrController = this.system.controllers[i];\r\n        const xrGamepad = xrController ? xrController.gamepad : null;\r\n        _xrGamepads.push(xrGamepad);\r\n        if (xrGamepad && xrController.handedness === handPreference) return xrGamepad;\r\n      }\r\n\r\n      // https://developer.mozilla.org/en-US/docs/Web/API/Gamepad/hand\r\n      const navGamepads = navigator.getGamepads ? navigator.getGamepads() : _empty;\r\n      for (let i = 0; i < navGamepads.length; i++) {\r\n        const navGamepad = navGamepads[i];\r\n        if (navGamepad && navGamepad.hand === handPreference) return navGamepad;\r\n      }\r\n\r\n      return _xrGamepads[0] || navGamepads[0];\r\n    };\r\n  })(),\r\n\r\n  /**\r\n   * Returns the state of the given button.\r\n   * @param  {number} index The button (0-N) for which to find state.\r\n   * @return {GamepadButton}\r\n   */\r\n  getButton: function (index) {\r\n    return this.getGamepad(Hand.RIGHT).buttons[index];\r\n  },\r\n\r\n  /**\r\n   * Returns state of the given axis. Axes are labelled 0-N, where 0-1 will\r\n   * represent X/Y on the first joystick, and 2-3 X/Y on the second.\r\n   * @param  {number} index The axis (0-N) for which to find state.\r\n   * @return {number} On the interval [-1,1].\r\n   */\r\n  getAxis: function (index) {\r\n    return this.getGamepad(index > 1 ? Hand.RIGHT : Hand.LEFT).axes[index];\r\n  },\r\n\r\n  /**\r\n   * Returns the state of the specified joystick as a THREE.Vector2.\r\n   * @param  {Joystick} role\r\n   * @param  {THREE.Vector2} target\r\n   * @return {THREE.Vector2}\r\n   */\r\n  getJoystick: function (index, target) {\r\n    const gamepad = this.getGamepad(index === Joystick.MOVEMENT ? Hand.LEFT : Hand.RIGHT);\r\n    // gamepad can be null here if it becomes disconnected even if isConnected() was called\r\n    // in the same tick before calling getJoystick.\r\n    if (!gamepad) {\r\n      return target.set(0, 0);\r\n    }\r\n    if (gamepad.mapping === 'xr-standard') {\r\n      // See: https://github.com/donmccurdy/aframe-extras/issues/307\r\n      switch (index) {\r\n        case Joystick.MOVEMENT: return target.set(gamepad.axes[2], gamepad.axes[3]);\r\n        case Joystick.ROTATION: return target.set(gamepad.axes[2], 0);\r\n      }\r\n    } else {\r\n      switch (index) {\r\n        case Joystick.MOVEMENT: return target.set(gamepad.axes[0], gamepad.axes[1]);\r\n        case Joystick.ROTATION: return target.set(gamepad.axes[2], gamepad.axes[3]);\r\n      }\r\n    }\r\n    throw new Error('Unexpected joystick index \"%d\".', index);\r\n  },\r\n\r\n  /**\r\n   * Returns the state of the dpad as a THREE.Vector2.\r\n   * @param {THREE.Vector2} target\r\n   * @return {THREE.Vector2}\r\n   */\r\n  getDpad: function (target) {\r\n    const gamepad = this.getGamepad(Hand.LEFT);\r\n    if (!gamepad) {\r\n      return target.set(0, 0);\r\n    }\r\n    if (!gamepad.buttons[GamepadButton.DPAD_RIGHT]) {\r\n      return target.set(0, 0);\r\n    }\r\n    return target.set(\r\n      (gamepad.buttons[GamepadButton.DPAD_RIGHT].pressed ? 1 : 0)\r\n      + (gamepad.buttons[GamepadButton.DPAD_LEFT].pressed ? -1 : 0),\r\n      (gamepad.buttons[GamepadButton.DPAD_UP].pressed ? -1 : 0)\r\n      + (gamepad.buttons[GamepadButton.DPAD_DOWN].pressed ? 1 : 0)\r\n    );\r\n  },\r\n\r\n  /**\r\n   * Returns true if the gamepad is currently connected to the system.\r\n   * @return {boolean}\r\n   */\r\n  isConnected: function () {\r\n    const gamepad = this.getGamepad(Hand.LEFT);\r\n    return !!(gamepad && gamepad.connected);\r\n  },\r\n\r\n  /**\r\n   * Returns a string containing some information about the controller. Result\r\n   * may vary across browsers, for a given controller.\r\n   * @return {string}\r\n   */\r\n  getID: function () {\r\n    return this.getGamepad(Hand.LEFT).id;\r\n  }\r\n});\r\n","/* global AFRAME, THREE */\r\n/* eslint-disable no-prototype-builtins */\r\nrequire('../../lib/keyboard.polyfill');\r\n\r\nconst PROXY_FLAG = '__keyboard-controls-proxy';\r\n\r\nconst KeyboardEvent = window.KeyboardEvent;\r\n\r\n/**\r\n * Keyboard Controls component.\r\n *\r\n * Stripped-down version of: https://github.com/donmccurdy/aframe-keyboard-controls\r\n *\r\n * Bind keyboard events to components, or control your entities with the WASD keys.\r\n *\r\n * Why use KeyboardEvent.code? \"This is set to a string representing the key that was pressed to\r\n * generate the KeyboardEvent, without taking the current keyboard layout (e.g., QWERTY vs.\r\n * Dvorak), locale (e.g., English vs. French), or any modifier keys into account. This is useful\r\n * when you care about which physical key was pressed, rather thanwhich character it corresponds\r\n * to. For example, if you’re a writing a game, you might want a certain set of keys to move the\r\n * player in different directions, and that mapping should ideally be independent of keyboard\r\n * layout. See: https://developers.google.com/web/updates/2016/04/keyboardevent-keys-codes\r\n *\r\n * @namespace wasd-controls\r\n * keys the entity moves and if you release it will stop. Easing simulates friction.\r\n * to the entity when pressing the keys.\r\n * @param {bool} [enabled=true] - To completely enable or disable the controls\r\n */\r\nmodule.exports = AFRAME.registerComponent('keyboard-controls', {\r\n  schema: {\r\n    enabled:           { default: true },\r\n    debug:             { default: false }\r\n  },\r\n\r\n  init: function () {\r\n    this.dVelocity = new THREE.Vector3();\r\n    this.localKeys = {};\r\n    this.listeners = {\r\n      keydown: this.onKeyDown.bind(this),\r\n      keyup: this.onKeyUp.bind(this),\r\n      blur: this.onBlur.bind(this),\r\n      onContextMenu: this.onContextMenu.bind(this),\r\n    };\r\n  },\r\n\r\n  /*******************************************************************\r\n  * Movement\r\n  */\r\n\r\n  isVelocityActive: function () {\r\n    return this.data.enabled && !!Object.keys(this.getKeys()).length;\r\n  },\r\n\r\n  getVelocityDelta: function () {\r\n    const data = this.data;\r\n    const keys = this.getKeys();\r\n\r\n    this.dVelocity.set(0, 0, 0);\r\n    if (data.enabled) {\r\n      if (keys.KeyW || keys.ArrowUp)    { this.dVelocity.z -= 1; }\r\n      if (keys.KeyA || keys.ArrowLeft)  { this.dVelocity.x -= 1; }\r\n      if (keys.KeyS || keys.ArrowDown)  { this.dVelocity.z += 1; }\r\n      if (keys.KeyD || keys.ArrowRight) { this.dVelocity.x += 1; }\r\n\r\n      // Move faster when the shift key is down.\r\n      if (keys.ShiftLeft) { this.dVelocity = this.dVelocity.multiplyScalar(2); }\r\n    }\r\n\r\n    return this.dVelocity.clone();\r\n  },\r\n\r\n  /*******************************************************************\r\n  * Events\r\n  */\r\n\r\n  play: function () {\r\n    this.attachEventListeners();\r\n  },\r\n\r\n  pause: function () {\r\n    this.removeEventListeners();\r\n  },\r\n\r\n  attachEventListeners: function () {\r\n    window.addEventListener(\"contextmenu\", this.listeners.onContextMenu, false);\r\n    window.addEventListener(\"keydown\", this.listeners.keydown, false);\r\n    window.addEventListener(\"keyup\", this.listeners.keyup, false);\r\n    window.addEventListener(\"blur\", this.listeners.blur, false);\r\n  },\r\n\r\n  onContextMenu: function () {\r\n    for (const code in this.localKeys) {\r\n      if (this.localKeys.hasOwnProperty(code)) {\r\n        delete this.localKeys[code];\r\n      }\r\n    }\r\n  },\r\n\r\n  removeEventListeners: function () {\r\n    window.removeEventListener('keydown', this.listeners.keydown);\r\n    window.removeEventListener('keyup', this.listeners.keyup);\r\n    window.removeEventListener('blur', this.listeners.blur);\r\n  },\r\n\r\n  onKeyDown: function (event) {\r\n    if (AFRAME.utils.shouldCaptureKeyEvent(event)) {\r\n      this.localKeys[event.code] = true;\r\n      this.emit(event);\r\n    }\r\n  },\r\n\r\n  onKeyUp: function (event) {\r\n    if (AFRAME.utils.shouldCaptureKeyEvent(event)) {\r\n      delete this.localKeys[event.code];\r\n      this.emit(event);\r\n    }\r\n  },\r\n\r\n  onBlur: function () {\r\n    for (const code in this.localKeys) {\r\n      if (this.localKeys.hasOwnProperty(code)) {\r\n        delete this.localKeys[code];\r\n      }\r\n    }\r\n  },\r\n\r\n  emit: function (event) {\r\n    // TODO - keydown only initially?\r\n    // TODO - where the f is the spacebar\r\n\r\n    // Emit original event.\r\n    if (PROXY_FLAG in event) {\r\n      // TODO - Method never triggered.\r\n      this.el.emit(event.type, event);\r\n    }\r\n\r\n    // Emit convenience event, identifying key.\r\n    this.el.emit(event.type + ':' + event.code, new KeyboardEvent(event.type, event));\r\n    if (this.data.debug) console.log(event.type + ':' + event.code);\r\n  },\r\n\r\n  /*******************************************************************\r\n  * Accessors\r\n  */\r\n\r\n  isPressed: function (code) {\r\n    return code in this.getKeys();\r\n  },\r\n\r\n  getKeys: function () {\r\n    if (this.isProxied()) {\r\n      return this.el.sceneEl.components['proxy-controls'].getKeyboard();\r\n    }\r\n    return this.localKeys;\r\n  },\r\n\r\n  isProxied: function () {\r\n    const proxyControls = this.el.sceneEl.components['proxy-controls'];\r\n    return proxyControls && proxyControls.isConnected();\r\n  }\r\n\r\n});\r\n","/**\r\n * Movement Controls\r\n *\r\n * @author Don McCurdy <dm@donmccurdy.com>\r\n */\r\n\r\nconst COMPONENT_SUFFIX = '-controls';\r\nconst MAX_DELTA = 0.2; // ms\r\nconst EPS = 10e-6;\r\nconst MOVED = 'moved';\r\n\r\nmodule.exports = AFRAME.registerComponent('movement-controls', {\r\n\r\n  /*******************************************************************\r\n   * Schema\r\n   */\r\n\r\n  dependencies: ['rotation'],\r\n\r\n  schema: {\r\n    enabled:            { default: true },\r\n    controls:           { default: ['gamepad', 'trackpad', 'keyboard', 'touch'] },\r\n    speed:              { default: 0.3, min: 0 },\r\n    fly:                { default: false },\r\n    constrainToNavMesh: { default: false },\r\n    camera:             { default: '[movement-controls] [camera]', type: 'selector' }\r\n  },\r\n\r\n  /*******************************************************************\r\n   * Lifecycle\r\n   */\r\n\r\n  init: function () {\r\n    const el = this.el;\r\n    if (!this.data.camera) {\r\n      this.data.camera = el.querySelector('[camera]');\r\n    }\r\n    this.velocityCtrl = null;\r\n\r\n    this.velocity = new THREE.Vector3();\r\n    this.heading = new THREE.Quaternion();\r\n    this.eventDetail = {};\r\n\r\n    // Navigation\r\n    this.navGroup = null;\r\n    this.navNode = null;\r\n\r\n    if (el.sceneEl.hasLoaded) {\r\n      this.injectControls();\r\n    } else {\r\n      el.sceneEl.addEventListener('loaded', this.injectControls.bind(this));\r\n    }\r\n  },\r\n\r\n  update: function (prevData) {\r\n    const el = this.el;\r\n    const data = this.data;\r\n    const nav = el.sceneEl.systems.nav;\r\n    if (el.sceneEl.hasLoaded) {\r\n      this.injectControls();\r\n    }\r\n    if (nav && data.constrainToNavMesh !== prevData.constrainToNavMesh) {\r\n      data.constrainToNavMesh\r\n        ? nav.addAgent(this)\r\n        : nav.removeAgent(this);\r\n    }\r\n    if (data.enabled !== prevData.enabled) {\r\n      // Propagate the enabled change to all controls\r\n      for (let i = 0; i < data.controls.length; i++) {\r\n        const name = data.controls[i] + COMPONENT_SUFFIX;\r\n        this.el.setAttribute(name, { enabled: this.data.enabled });\r\n      }\r\n    }\r\n  },\r\n\r\n  injectControls: function () {\r\n    const data = this.data;\r\n\r\n    for (let i = 0; i < data.controls.length; i++) {\r\n      const name = data.controls[i] + COMPONENT_SUFFIX;\r\n      this.el.setAttribute(name, { enabled: this.data.enabled });\r\n    }\r\n  },\r\n\r\n  updateNavLocation: function () {\r\n    this.navGroup = null;\r\n    this.navNode = null;\r\n  },\r\n\r\n  /*******************************************************************\r\n   * Tick\r\n   */\r\n\r\n  tick: (function () {\r\n    const start = new THREE.Vector3();\r\n    const end = new THREE.Vector3();\r\n    const clampedEnd = new THREE.Vector3();\r\n\r\n    return function (t, dt) {\r\n      if (!dt) return;\r\n\r\n      const el = this.el;\r\n      const data = this.data;\r\n\r\n      if (!data.enabled) return;\r\n\r\n      this.updateVelocityCtrl();\r\n      const velocityCtrl = this.velocityCtrl;\r\n      const velocity = this.velocity;\r\n\r\n      if (!velocityCtrl) return;\r\n\r\n      // Update velocity. If FPS is too low, reset.\r\n      if (dt / 1000 > MAX_DELTA) {\r\n        velocity.set(0, 0, 0);\r\n      } else {\r\n        this.updateVelocity(dt);\r\n      }\r\n\r\n      if (data.constrainToNavMesh\r\n          && velocityCtrl.isNavMeshConstrained !== false) {\r\n\r\n        if (velocity.lengthSq() < EPS) {\r\n            // TODO: 检查是否有效\r\n            // can't cache this.navNode because when the start position changed by other controls \r\n            // this.navNode may not be the closest node any more, we need recompute it. Otherwise,\r\n            // clampStep may result in wrong clamp\r\n            this.navNode = null; // give this.navNode a chance to recalculate\r\n            return;\r\n        };\r\n\r\n        start.copy(el.object3D.position);\r\n        end\r\n          .copy(velocity)\r\n          .multiplyScalar(dt / 1000)\r\n          .add(start);\r\n\r\n        const nav = el.sceneEl.systems.nav;\r\n\r\n        this.navGroup = this.navGroup === null ? nav.getGroup(start) : this.navGroup;\r\n        if (this.navGroup != null && !this.navNode) {\r\n            this.navNode = nav.getNode(start, this.navGroup);\r\n        }\r\n        if (this.navNode) {\r\n            // navNode必须存在，否则clampStep没用。异常情况下可能把clampedEnd设置到navMesh外面\r\n            this.navNode = nav.clampStep(start, end, this.navGroup, this.navNode, clampedEnd);\r\n            el.object3D.position.copy(clampedEnd);\r\n        }\r\n        \r\n      } else if (el.hasAttribute('velocity')) {\r\n        el.setAttribute('velocity', velocity);\r\n      } else {\r\n        el.object3D.position.x += velocity.x * dt / 1000;\r\n        el.object3D.position.y += velocity.y * dt / 1000;\r\n        el.object3D.position.z += velocity.z * dt / 1000;\r\n      }\r\n\r\n    };\r\n  }()),\r\n\r\n  /*******************************************************************\r\n   * Movement\r\n   */\r\n\r\n  updateVelocityCtrl: function () {\r\n    const data = this.data;\r\n    if (data.enabled) {\r\n      for (let i = 0, l = data.controls.length; i < l; i++) {\r\n        const control = this.el.components[data.controls[i] + COMPONENT_SUFFIX];\r\n        if (control && control.isVelocityActive()) {\r\n          this.velocityCtrl = control;\r\n          return;\r\n        }\r\n      }\r\n      this.velocityCtrl = null;\r\n    }\r\n  },\r\n\r\n  updateVelocity: (function () {\r\n    const vector2 = new THREE.Vector2();\r\n    const quaternion = new THREE.Quaternion();\r\n\r\n    return function (dt) {\r\n      let dVelocity;\r\n      const el = this.el;\r\n      const control = this.velocityCtrl;\r\n      const velocity = this.velocity;\r\n      const data = this.data;\r\n\r\n      if (control) {\r\n        if (control.getVelocityDelta) {\r\n          dVelocity = control.getVelocityDelta(dt);\r\n        } else if (control.getVelocity) {\r\n          velocity.copy(control.getVelocity());\r\n          return;\r\n        } else if (control.getPositionDelta) {\r\n          velocity.copy(control.getPositionDelta(dt).multiplyScalar(1000 / dt));\r\n          return;\r\n        } else {\r\n          throw new Error('Incompatible movement controls: ', control);\r\n        }\r\n      }\r\n\r\n      if (el.hasAttribute('velocity') && !data.constrainToNavMesh) {\r\n        velocity.copy(this.el.getAttribute('velocity'));\r\n      }\r\n\r\n      if (dVelocity && data.enabled) {\r\n        const cameraEl = data.camera;\r\n\r\n        // Rotate to heading\r\n        quaternion.copy(cameraEl.object3D.quaternion);\r\n        quaternion.premultiply(el.object3D.quaternion);\r\n        dVelocity.applyQuaternion(quaternion);\r\n\r\n        const factor = dVelocity.length();\r\n        if (data.fly) {\r\n          velocity.copy(dVelocity);\r\n          velocity.multiplyScalar(this.data.speed * 16.66667);\r\n        } else {\r\n          vector2.set(dVelocity.x, dVelocity.z);\r\n          vector2.setLength(factor * this.data.speed * 16.66667);\r\n          velocity.x = vector2.x;\r\n          velocity.y = 0;\r\n          velocity.z = vector2.y;\r\n        }\r\n        if (velocity.x !== 0 || velocity.y !== 0 || velocity.z !== 0) {\r\n          this.eventDetail.velocity = velocity;\r\n          this.el.emit(MOVED, this.eventDetail);\r\n        }\r\n      }\r\n    };\r\n\r\n  }())\r\n});\r\n","/* global AFRAME, THREE */\r\nimport nipplejs from \"nipplejs\";\r\n\r\nAFRAME.registerComponent(\"nipple-controls\", {\r\n  schema: {\r\n    enabled: { default: true },\r\n    mode: { default: \"dynamic\", oneOf: [\"static\", \"semi\", \"dynamic\"] },\r\n    rotationSensitivity: { default: 1.0 },\r\n    moveJoystickEnabled: { default: true },\r\n    lookJoystickEnabled: { default: true },\r\n    sideMargin: { default: \"30px\" },\r\n    bottomMargin: { default: \"70px\" },\r\n    moveJoystickPosition: { default: \"left\", oneOf: [\"left\", \"right\"] },\r\n    lookJoystickPosition: { default: \"right\", oneOf: [\"left\", \"right\"] },\r\n  },\r\n\r\n  init() {\r\n    this.dVelocity = new THREE.Vector3();\r\n    this.lookVector = new THREE.Vector2();\r\n    const lookControls = this.el.querySelector(\"[look-controls]\").components[\"look-controls\"];\r\n    this.pitchObject = lookControls.pitchObject;\r\n    this.yawObject = lookControls.yawObject;\r\n    this.rigRotation = this.el.object3D.rotation;\r\n    this.moveData = undefined;\r\n    this.lookData = undefined;\r\n    this.moving = false;\r\n    this.rotating = false;\r\n  },\r\n\r\n  update(oldData) {\r\n    if (\r\n      this.data.moveJoystickPosition !== oldData.moveJoystickPosition ||\r\n      this.data.sideMargin !== oldData.sideMargin ||\r\n      this.data.bottomMargin !== oldData.bottomMargin ||\r\n      this.data.mode !== oldData.mode\r\n    ) {\r\n      this.removeMoveJoystick();\r\n    }\r\n    if (\r\n      this.data.lookJoystickPosition !== oldData.lookJoystickPosition ||\r\n      this.data.sideMargin !== oldData.sideMargin ||\r\n      this.data.bottomMargin !== oldData.bottomMargin ||\r\n      this.data.mode !== oldData.mode\r\n    ) {\r\n      this.removeLookJoystick();\r\n    }\r\n    if (this.data.enabled && this.data.moveJoystickEnabled) {\r\n      this.createMoveJoystick();\r\n    } else {\r\n      this.removeMoveJoystick();\r\n    }\r\n    if (this.data.enabled && this.data.lookJoystickEnabled) {\r\n      this.createLookJoystick();\r\n    } else {\r\n      this.removeLookJoystick();\r\n    }\r\n  },\r\n\r\n  pause() {\r\n    this.moving = false;\r\n    this.rotating = false;\r\n  },\r\n\r\n  remove() {\r\n    this.removeMoveJoystick();\r\n    this.removeLookJoystick();\r\n  },\r\n\r\n  isVelocityActive() {\r\n    return this.data.enabled && this.moving;\r\n  },\r\n\r\n  getVelocityDelta() {\r\n    this.dVelocity.set(0, 0, 0);\r\n    if (this.isVelocityActive()) {\r\n      const force = this.moveData.force < 1 ? this.moveData.force : 1;\r\n      const angle = this.moveData.angle.radian;\r\n      const x = Math.cos(angle) * force;\r\n      const z = -Math.sin(angle) * force;\r\n      this.dVelocity.set(x, 0, z);\r\n    }\r\n    return this.dVelocity; // We don't do a clone() here, the Vector3 will be modified by the calling code but that's fine.\r\n  },\r\n\r\n  isRotationActive() {\r\n    return this.data.enabled && this.rotating;\r\n  },\r\n\r\n  updateRotation(dt) {\r\n    if (!this.isRotationActive()) return;\r\n\r\n    const force = this.lookData.force < 1 ? this.lookData.force : 1;\r\n    const angle = this.lookData.angle.radian;\r\n    const lookVector = this.lookVector;\r\n    lookVector.x = Math.cos(angle) * force;\r\n    lookVector.y = Math.sin(angle) * force;\r\n    lookVector.multiplyScalar((this.data.rotationSensitivity * dt) / 1000);\r\n\r\n    this.yawObject.rotation.y -= lookVector.x;\r\n    let x = this.pitchObject.rotation.x + lookVector.y;\r\n    x = Math.max(-Math.PI / 2, Math.min(Math.PI / 2, x));\r\n    this.pitchObject.rotation.x = x;\r\n  },\r\n\r\n  tick: function (t, dt) {\r\n    this.updateRotation(dt);\r\n  },\r\n\r\n  initLeftZone() {\r\n    const leftZone = document.createElement(\"div\");\r\n    leftZone.setAttribute(\"id\", \"joystickLeftZone\");\r\n    leftZone.setAttribute(\r\n      \"style\",\r\n      `position:absolute;${this.data.moveJoystickPosition}:${this.data.sideMargin};bottom:${this.data.bottomMargin};z-index:1`\r\n    );\r\n    document.body.appendChild(leftZone);\r\n    this.leftZone = leftZone;\r\n  },\r\n\r\n  initRightZone() {\r\n    const rightZone = document.createElement(\"div\");\r\n    rightZone.setAttribute(\"id\", \"joystickRightZone\");\r\n    rightZone.setAttribute(\r\n      \"style\",\r\n      `position:absolute;${this.data.lookJoystickPosition}:${this.data.sideMargin};bottom:${this.data.bottomMargin};z-index:1`\r\n    );\r\n    document.body.appendChild(rightZone);\r\n    this.rightZone = rightZone;\r\n  },\r\n\r\n  createMoveJoystick() {\r\n    if (this.moveJoystick) return;\r\n    this.initLeftZone();\r\n    const options = {\r\n      mode: this.data.mode,\r\n      zone: this.leftZone,\r\n      color: \"white\",\r\n      fadeTime: 0,\r\n    };\r\n    this.leftZone.style.width = \"100px\";\r\n    if (this.data.mode === \"static\") {\r\n      this.leftZone.style.height = \"100px\";\r\n      options.position = { left: \"50%\", bottom: \"50%\" };\r\n    } else {\r\n      this.leftZone.style.height = \"400px\";\r\n    }\r\n\r\n    this.moveJoystick = nipplejs.create(options);\r\n    this.moveJoystick.on(\"move\", (evt, data) => {\r\n      this.moveData = data;\r\n      this.moving = true;\r\n    });\r\n    this.moveJoystick.on(\"end\", (evt, data) => {\r\n      this.moving = false;\r\n    });\r\n  },\r\n\r\n  createLookJoystick() {\r\n    if (this.lookJoystick) return;\r\n    this.initRightZone();\r\n    const options = {\r\n      mode: this.data.mode,\r\n      zone: this.rightZone,\r\n      color: \"white\",\r\n      fadeTime: 0,\r\n    };\r\n    this.rightZone.style.width = \"100px\";\r\n    if (this.data.mode === \"static\") {\r\n      this.rightZone.style.height = \"100px\";\r\n      options.position = { left: \"50%\", bottom: \"50%\" };\r\n    } else {\r\n      this.rightZone.style.height = \"400px\";\r\n    }\r\n\r\n    this.lookJoystick = nipplejs.create(options);\r\n    this.lookJoystick.on(\"move\", (evt, data) => {\r\n      this.lookData = data;\r\n      this.rotating = true;\r\n    });\r\n    this.lookJoystick.on(\"end\", (evt, data) => {\r\n      this.rotating = false;\r\n    });\r\n  },\r\n\r\n  removeMoveJoystick() {\r\n    if (this.moveJoystick) {\r\n      this.moveJoystick.destroy();\r\n      this.moveJoystick = undefined;\r\n    }\r\n\r\n    this.moveData = undefined;\r\n\r\n    if (this.leftZone && this.leftZone.parentNode) {\r\n      this.leftZone.remove();\r\n      this.leftZone = undefined;\r\n    }\r\n  },\r\n\r\n  removeLookJoystick() {\r\n    if (this.lookJoystick) {\r\n      this.lookJoystick.destroy();\r\n      this.lookJoystick = undefined;\r\n    }\r\n\r\n    this.lookData = undefined;\r\n\r\n    if (this.rightZone && this.rightZone.parentNode) {\r\n      this.rightZone.remove();\r\n      this.rightZone = undefined;\r\n    }\r\n  },\r\n});\r\n","/**\r\n * Touch-to-move-forward controls for mobile.\r\n */\r\nmodule.exports = AFRAME.registerComponent('touch-controls', {\r\n  schema: {\r\n    enabled: { default: true },\r\n    reverseEnabled: { default: true }\r\n  },\r\n\r\n  init: function () {\r\n    this.dVelocity = new THREE.Vector3();\r\n    this.bindMethods();\r\n    this.direction = 0;\r\n  },\r\n\r\n  play: function () {\r\n    this.addEventListeners();\r\n  },\r\n\r\n  pause: function () {\r\n    this.removeEventListeners();\r\n    this.dVelocity.set(0, 0, 0);\r\n  },\r\n\r\n  remove: function () {\r\n    this.pause();\r\n  },\r\n\r\n  addEventListeners: function () {\r\n    const sceneEl = this.el.sceneEl;\r\n    const canvasEl = sceneEl.canvas;\r\n\r\n    if (!canvasEl) {\r\n      sceneEl.addEventListener('render-target-loaded', this.addEventListeners.bind(this));\r\n      return;\r\n    }\r\n\r\n    canvasEl.addEventListener('touchstart', this.onTouchStart, {passive: true});\r\n    canvasEl.addEventListener('touchend', this.onTouchEnd, {passive: true});\r\n    const vrModeUI = sceneEl.getAttribute('vr-mode-ui');\r\n    if (vrModeUI && vrModeUI.cardboardModeEnabled) {\r\n      sceneEl.addEventListener('enter-vr', this.onEnterVR);\r\n    }\r\n  },\r\n\r\n  removeEventListeners: function () {\r\n    const canvasEl = this.el.sceneEl && this.el.sceneEl.canvas;\r\n    if (!canvasEl) { return; }\r\n\r\n    canvasEl.removeEventListener('touchstart', this.onTouchStart);\r\n    canvasEl.removeEventListener('touchend', this.onTouchEnd);\r\n    this.el.sceneEl.removeEventListener('enter-vr', this.onEnterVR)\r\n  },\r\n\r\n  isVelocityActive: function () {\r\n    return this.data.enabled && !!this.direction;\r\n  },\r\n\r\n  getVelocityDelta: function () {\r\n    this.dVelocity.z = this.direction;\r\n    return this.dVelocity.clone();\r\n  },\r\n\r\n  bindMethods: function () {\r\n    this.onTouchStart = this.onTouchStart.bind(this);\r\n    this.onTouchEnd = this.onTouchEnd.bind(this);\r\n    this.onEnterVR = this.onEnterVR.bind(this);\r\n  },\r\n\r\n  onTouchStart: function (e) {\r\n    this.direction = -1;\r\n    if (this.data.reverseEnabled && e.touches && e.touches.length === 2) {\r\n      this.direction = 1;\r\n    }\r\n    e.preventDefault();\r\n  },\r\n\r\n  onTouchEnd: function (e) {\r\n    this.direction = 0;\r\n    e.preventDefault();\r\n  },\r\n\r\n  onEnterVR: function () {\r\n    // This is to make the Cardboard button on Chrome Android working\r\n    const xrSession = this.el.sceneEl.xrSession;\r\n    if (!xrSession) { return; }\r\n    xrSession.addEventListener('selectstart', this.onTouchStart);\r\n    xrSession.addEventListener('selectend', this.onTouchEnd);\r\n  }\r\n});\r\n","/**\r\n * 3dof (Gear VR, Daydream) controls for mobile.\r\n */\r\nmodule.exports = AFRAME.registerComponent('trackpad-controls', {\r\n  schema: {\r\n    enabled: { default: true },\r\n    enableNegX: { default: true },\r\n    enablePosX: { default: true },\r\n    enableNegZ: { default: true },\r\n    enablePosZ: { default: true },\r\n    mode: { default: 'touch', oneOf: ['swipe', 'touch', 'press'] }\r\n\r\n  },\r\n\r\n  init: function () {\r\n    this.dVelocity = new THREE.Vector3();\r\n    this.zVel      = 0;\r\n    this.xVel      = 0;\r\n    this.bindMethods();\r\n  },\r\n\r\n  play: function () {\r\n    this.addEventListeners();\r\n  },\r\n\r\n  pause: function () {\r\n    this.removeEventListeners();\r\n    this.dVelocity.set(0, 0, 0);\r\n  },\r\n\r\n  remove: function () {\r\n    this.pause();\r\n  },\r\n\r\n  addEventListeners: function () {\r\n    const data = this.data;\r\n    const sceneEl = this.el.sceneEl;\r\n\r\n    sceneEl.addEventListener('axismove', this.onAxisMove);\r\n\r\n    switch (data.mode) {\r\n      case 'swipe':\r\n      case 'touch':\r\n        sceneEl.addEventListener('trackpadtouchstart', this.onTouchStart);\r\n        sceneEl.addEventListener('trackpadtouchend', this.onTouchEnd);\r\n        break;\r\n\r\n      case 'press':\r\n        sceneEl.addEventListener('trackpaddown', this.onTouchStart);\r\n        sceneEl.addEventListener('trackpadup', this.onTouchEnd);\r\n        break;\r\n    }\r\n\r\n  },\r\n\r\n  removeEventListeners: function () {\r\n    const sceneEl = this.el.sceneEl;\r\n\r\n    sceneEl.removeEventListener('axismove', this.onAxisMove);\r\n    sceneEl.removeEventListener('trackpadtouchstart', this.onTouchStart);\r\n    sceneEl.removeEventListener('trackpadtouchend', this.onTouchEnd);\r\n    sceneEl.removeEventListener('trackpaddown', this.onTouchStart);\r\n    sceneEl.removeEventListener('trackpadup', this.onTouchEnd);\r\n  },\r\n\r\n  isVelocityActive: function () {\r\n    return this.data.enabled && this.isMoving;\r\n  },\r\n\r\n  getVelocityDelta: function () {\r\n    this.dVelocity.z = this.isMoving ? -this.zVel : 1;\r\n    this.dVelocity.x = this.isMoving ? this.xVel : 1;\r\n    return this.dVelocity.clone();\r\n  },\r\n\r\n  bindMethods: function () {\r\n    this.onTouchStart = this.onTouchStart.bind(this);\r\n    this.onTouchEnd = this.onTouchEnd.bind(this);\r\n    this.onAxisMove = this.onAxisMove.bind(this);\r\n  },\r\n\r\n  onTouchStart: function (e) {\r\n    switch(this.data.mode){\r\n      case 'swipe':\r\n        this.canRecordAxis = true;\r\n        this.startingAxisData = [];\r\n        break;\r\n      case 'touch':\r\n        this.isMoving = true;\r\n        break;\r\n      case 'press':\r\n        this.isMoving = true;\r\n        break;\r\n    }\r\n\r\n    e.preventDefault();\r\n  },\r\n\r\n  onTouchEnd: function (e) {\r\n    if(this.data.mode == 'swipe') {\r\n        this.startingAxisData = [];\r\n    }\r\n\r\n    this.isMoving = false;\r\n    e.preventDefault();\r\n  },\r\n\r\n  onAxisMove: function(e){\r\n    switch (this.data.mode) {\r\n      case 'swipe':\r\n        return this.handleSwipeAxis(e);\r\n      case 'touch':\r\n      case 'press':\r\n        return this.handleTouchAxis(e);\r\n    }\r\n  },\r\n\r\n  handleSwipeAxis: function(e) {\r\n    const data = this.data;\r\n    const axisData = e.detail.axis;\r\n\r\n    if(this.startingAxisData.length === 0 && this.canRecordAxis){\r\n      this.canRecordAxis = false;\r\n      this.startingAxisData[0] = axisData[0];\r\n      this.startingAxisData[1] = axisData[1];\r\n    }\r\n\r\n    if(this.startingAxisData.length > 0){\r\n      let velX = 0;\r\n      let velZ = 0;\r\n\r\n      if (data.enableNegX && axisData[0] < this.startingAxisData[0]) {\r\n        velX = -1;\r\n      }\r\n\r\n      if (data.enablePosX && axisData[0] > this.startingAxisData[0]) {\r\n        velX = 1;\r\n      }\r\n\r\n      if (data.enablePosZ && axisData[1] > this.startingAxisData[1]) {\r\n        velZ = -1;\r\n      }\r\n\r\n      if (data.enableNegZ && axisData[1] < this.startingAxisData[1]) {\r\n        velZ = 1;\r\n      }\r\n\r\n      const absChangeZ  = Math.abs(this.startingAxisData[1] - axisData[1]);\r\n      const absChangeX  = Math.abs(this.startingAxisData[0] - axisData[0]);\r\n\r\n      if (absChangeX > absChangeZ) {\r\n        this.zVel = 0;\r\n        this.xVel = velX;\r\n        this.isMoving = true;\r\n      } else {\r\n        this.xVel = 0;\r\n        this.zVel = velZ;\r\n        this.isMoving = true;\r\n      }\r\n\r\n    }\r\n  },\r\n\r\n  handleTouchAxis: function(e) {\r\n    const data = this.data;\r\n    const axisData = e.detail.axis;\r\n\r\n    let velX = 0;\r\n    let velZ = 0;\r\n\r\n    if (data.enableNegX && axisData[0] < 0) {\r\n      velX = -1;\r\n    }\r\n\r\n    if (data.enablePosX && axisData[0] > 0) {\r\n      velX = 1;\r\n    }\r\n\r\n    if (data.enablePosZ && axisData[1] > 0) {\r\n      velZ = -1;\r\n    }\r\n\r\n    if (data.enableNegZ && axisData[1] < 0) {\r\n      velZ = 1;\r\n    }\r\n\r\n    if (Math.abs(axisData[0]) > Math.abs(axisData[1])) {\r\n      this.zVel = 0;\r\n      this.xVel = velX;\r\n    } else {\r\n      this.xVel = 0;\r\n      this.zVel = velZ;\r\n    }\r\n\r\n  }\r\n\r\n});\r\n\r\n","// The module cache\nvar __webpack_module_cache__ = {};\n\n// The require function\nfunction __webpack_require__(moduleId) {\n\t// Check if module is in cache\n\tvar cachedModule = __webpack_module_cache__[moduleId];\n\tif (cachedModule !== undefined) {\n\t\treturn cachedModule.exports;\n\t}\n\t// Create a new module (and put it into the cache)\n\tvar module = __webpack_module_cache__[moduleId] = {\n\t\t// no module.id needed\n\t\t// no module.loaded needed\n\t\texports: {}\n\t};\n\n\t// Execute the module function\n\t__webpack_modules__[moduleId](module, module.exports, __webpack_require__);\n\n\t// Return the exports of the module\n\treturn module.exports;\n}\n\n","// getDefaultExport function for compatibility with non-harmony modules\n__webpack_require__.n = (module) => {\n\tvar getter = module && module.__esModule ?\n\t\t() => (module['default']) :\n\t\t() => (module);\n\t__webpack_require__.d(getter, { a: getter });\n\treturn getter;\n};","// define getter functions for harmony exports\n__webpack_require__.d = (exports, definition) => {\n\tfor(var key in definition) {\n\t\tif(__webpack_require__.o(definition, key) && !__webpack_require__.o(exports, key)) {\n\t\t\tObject.defineProperty(exports, key, { enumerable: true, get: definition[key] });\n\t\t}\n\t}\n};","__webpack_require__.o = (obj, prop) => (Object.prototype.hasOwnProperty.call(obj, prop))","// define __esModule on exports\n__webpack_require__.r = (exports) => {\n\tif(typeof Symbol !== 'undefined' && Symbol.toStringTag) {\n\t\tObject.defineProperty(exports, Symbol.toStringTag, { value: 'Module' });\n\t}\n\tObject.defineProperty(exports, '__esModule', { value: true });\n};","require('./checkpoint-controls');\r\nrequire('./gamepad-controls');\r\nrequire('./keyboard-controls');\r\nrequire('./touch-controls');\r\nrequire('./movement-controls');\r\nrequire('./trackpad-controls');\r\nrequire('./nipple-controls');\r\n"],"names":[],"sourceRoot":""}