{"version":3,"file":"aframe-extras.pathfinding.min.js","mappings":"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","sources":["webpack://bs-aframe-extras/webpack/universalModuleDefinition","webpack://bs-aframe-extras/./node_modules/three-pathfinding/dist/three-pathfinding.module.js","webpack://bs-aframe-extras/./src/pathfinding/nav-agent.js","webpack://bs-aframe-extras/./src/pathfinding/nav-mesh.js","webpack://bs-aframe-extras/./src/pathfinding/nav-terrian.js","webpack://bs-aframe-extras/./src/pathfinding/system.js","webpack://bs-aframe-extras/external umd \"THREE\"","webpack://bs-aframe-extras/webpack/bootstrap","webpack://bs-aframe-extras/webpack/runtime/compat get default export","webpack://bs-aframe-extras/webpack/runtime/define property getters","webpack://bs-aframe-extras/webpack/runtime/hasOwnProperty shorthand","webpack://bs-aframe-extras/webpack/runtime/make namespace object","webpack://bs-aframe-extras/./src/pathfinding/index.js"],"sourcesContent":["(function webpackUniversalModuleDefinition(root, factory) {\n\tif(typeof exports === 'object' && typeof module === 'object')\n\t\tmodule.exports = factory(require(\"THREE\"));\n\telse if(typeof define === 'function' && define.amd)\n\t\tdefine([\"THREE\"], factory);\n\telse {\n\t\tvar a = typeof exports === 'object' ? factory(require(\"THREE\")) : factory(root[\"THREE\"]);\n\t\tfor(var i in a) (typeof exports === 'object' ? exports : root)[i] = a[i];\n\t}\n})(self, (__WEBPACK_EXTERNAL_MODULE__612__) => {\nreturn ","import{BufferAttribute as t,BufferGeometry as e,Vector3 as s,Plane as r,Triangle as n,Object3D as o,Mesh as i,SphereGeometry as h,MeshBasicMaterial as c,BoxGeometry as a,LineBasicMaterial as u,Line as l}from\"three\";class d{static roundNumber(t,e){const s=Math.pow(10,e);return Math.round(t*s)/s}static sample(t){return t[Math.floor(Math.random()*t.length)]}static distanceToSquared(t,e){var s=t.x-e.x,r=t.y-e.y,n=t.z-e.z;return s*s+r*r+n*n}static isPointInPoly(t,e){for(var s=!1,r=-1,n=t.length,o=n-1;++r<n;o=r)(t[r].z<=e.z&&e.z<t[o].z||t[o].z<=e.z&&e.z<t[r].z)&&e.x<(t[o].x-t[r].x)*(e.z-t[r].z)/(t[o].z-t[r].z)+t[r].x&&(s=!s);return s}static isVectorInPolygon(t,e,s){var r=1e5,n=-1e5,o=[];return e.vertexIds.forEach(t=>{r=Math.min(s[t].y,r),n=Math.max(s[t].y,n),o.push(s[t])}),!!(t.y<n+.5&&t.y>r-.5&&this.isPointInPoly(o,t))}static triarea2(t,e,s){return(s.x-t.x)*(e.z-t.z)-(e.x-t.x)*(s.z-t.z)}static vequal(t,e){return this.distanceToSquared(t,e)<1e-5}static mergeVertices(s,r=1e-4){r=Math.max(r,Number.EPSILON);for(var n={},o=s.getIndex(),i=s.getAttribute(\"position\"),h=o?o.count:i.count,c=0,a=[],u=[],l=Math.log10(1/r),d=Math.pow(10,l),p=0;p<h;p++){var g=o?o.getX(p):p,f=\"\";f+=~~(i.getX(g)*d)+\",\",f+=~~(i.getY(g)*d)+\",\",(f+=~~(i.getZ(g)*d)+\",\")in n?a.push(n[f]):(u.push(i.getX(g)),u.push(i.getY(g)),u.push(i.getZ(g)),n[f]=c,a.push(c),c++)}const v=new t(new Float32Array(u),i.itemSize,i.normalized),b=new e;return b.setAttribute(\"position\",v),b.setIndex(a),b}}class p{constructor(t){this.content=[],this.scoreFunction=t}push(t){this.content.push(t),this.sinkDown(this.content.length-1)}pop(){const t=this.content[0],e=this.content.pop();return this.content.length>0&&(this.content[0]=e,this.bubbleUp(0)),t}remove(t){const e=this.content.indexOf(t),s=this.content.pop();e!==this.content.length-1&&(this.content[e]=s,this.scoreFunction(s)<this.scoreFunction(t)?this.sinkDown(e):this.bubbleUp(e))}size(){return this.content.length}rescoreElement(t){this.sinkDown(this.content.indexOf(t))}sinkDown(t){const e=this.content[t];for(;t>0;){const s=(t+1>>1)-1,r=this.content[s];if(!(this.scoreFunction(e)<this.scoreFunction(r)))break;this.content[s]=e,this.content[t]=r,t=s}}bubbleUp(t){const e=this.content.length,s=this.content[t],r=this.scoreFunction(s);for(;;){const n=t+1<<1,o=n-1;let i,h=null;if(o<e&&(i=this.scoreFunction(this.content[o]),i<r&&(h=o)),n<e&&this.scoreFunction(this.content[n])<(null===h?r:i)&&(h=n),null===h)break;this.content[t]=this.content[h],this.content[h]=s,t=h}}}class g{constructor(){this.portals=[]}push(t,e){void 0===e&&(e=t),this.portals.push({left:t,right:e})}stringPull(){const t=this.portals,e=[];let s,r,n,o=0,i=0,h=0;s=t[0].left,r=t[0].left,n=t[0].right,e.push(s);for(let c=1;c<t.length;c++){const a=t[c].left,u=t[c].right;if(d.triarea2(s,n,u)<=0){if(!(d.vequal(s,n)||d.triarea2(s,r,u)>0)){e.push(r),s=r,o=i,r=s,n=s,i=o,h=o,c=o;continue}n=u,h=c}if(d.triarea2(s,r,a)>=0){if(!(d.vequal(s,r)||d.triarea2(s,n,a)<0)){e.push(n),s=n,o=h,r=s,n=s,i=o,h=o,c=o;continue}r=a,i=c}}return 0!==e.length&&d.vequal(e[e.length-1],t[t.length-1].left)||e.push(t[t.length-1].left),this.path=e,e}}class f{constructor(){this.zones={}}static createZone(t,e=1e-4){return class{static buildZone(t,e){const r=this._buildNavigationMesh(t,e),n={};r.vertices.forEach(t=>{t.x=d.roundNumber(t.x,2),t.y=d.roundNumber(t.y,2),t.z=d.roundNumber(t.z,2)}),n.vertices=r.vertices;const o=this._buildPolygonGroups(r);return n.groups=new Array(o.length),o.forEach((t,e)=>{const r=new Map;t.forEach((t,e)=>{r.set(t,e)});const o=new Array(t.length);t.forEach((t,e)=>{const i=[];t.neighbours.forEach(t=>i.push(r.get(t)));const h=[];t.neighbours.forEach(e=>h.push(this._getSharedVerticesInOrder(t,e)));const c=new s(0,0,0);c.add(n.vertices[t.vertexIds[0]]),c.add(n.vertices[t.vertexIds[1]]),c.add(n.vertices[t.vertexIds[2]]),c.divideScalar(3),c.x=d.roundNumber(c.x,2),c.y=d.roundNumber(c.y,2),c.z=d.roundNumber(c.z,2),o[e]={id:e,neighbours:i,vertexIds:t.vertexIds,centroid:c,portals:h}}),n.groups[e]=o}),n}static _buildNavigationMesh(t,e){return t=d.mergeVertices(t,e),this._buildPolygonsFromGeometry(t)}static _spreadGroupId(t){let e=new Set([t]);for(;e.size>0;){const s=e;e=new Set,s.forEach(s=>{s.group=t.group,s.neighbours.forEach(t=>{void 0===t.group&&e.add(t)})})}}static _buildPolygonGroups(t){const e=[];return t.polygons.forEach(t=>{void 0!==t.group?e[t.group].push(t):(t.group=e.length,this._spreadGroupId(t),e.push([t]))}),e}static _buildPolygonNeighbours(t,e){const s=new Set,r=e[t.vertexIds[1]],n=e[t.vertexIds[2]];return e[t.vertexIds[0]].forEach(e=>{e!==t&&(r.includes(e)||n.includes(e))&&s.add(e)}),r.forEach(e=>{e!==t&&n.includes(e)&&s.add(e)}),s}static _buildPolygonsFromGeometry(t){const e=[],r=[],n=t.attributes.position,o=t.index,i=[];for(let t=0;t<n.count;t++)r.push((new s).fromBufferAttribute(n,t)),i[t]=[];for(let s=0;s<t.index.count;s+=3){const t=o.getX(s),r=o.getX(s+1),n=o.getX(s+2),h={vertexIds:[t,r,n],neighbours:null};e.push(h),i[t].push(h),i[r].push(h),i[n].push(h)}return e.forEach(t=>{t.neighbours=this._buildPolygonNeighbours(t,i)}),{polygons:e,vertices:r}}static _getSharedVerticesInOrder(t,e){const s=t.vertexIds,r=s[0],n=s[1],o=s[2],i=e.vertexIds,h=i.includes(r),c=i.includes(n),a=i.includes(o);return h&&c&&a?Array.from(s):h&&c?[r,n]:c&&a?[n,o]:h&&a?[o,r]:(console.warn(\"Error processing navigation mesh neighbors; neighbors with <2 shared vertices found.\"),[])}}.buildZone(t,e)}setZoneData(t,e){this.zones[t]=e}getRandomNode(t,e,r,n){if(!this.zones[t])return new s;r=r||null,n=n||0;const o=[];return this.zones[t].groups[e].forEach(t=>{r&&n?d.distanceToSquared(r,t.centroid)<n*n&&o.push(t.centroid):o.push(t.centroid)}),d.sample(o)||new s}getClosestNode(t,e,s,r=!1){const n=this.zones[e].vertices;let o=null,i=Infinity;return this.zones[e].groups[s].forEach(e=>{const s=d.distanceToSquared(e.centroid,t);s<i&&(!r||d.isVectorInPolygon(t,e,n))&&(o=e,i=s)}),o}findPath(t,e,r,n){const o=this.zones[r].groups[n],i=this.zones[r].vertices,h=this.getClosestNode(t,r,n,!0),c=this.getClosestNode(e,r,n,!0);if(!h||!c)return null;const a=class{static init(t){for(let e=0;e<t.length;e++){const s=t[e];s.f=0,s.g=0,s.h=0,s.cost=1,s.visited=!1,s.closed=!1,s.parent=null}}static cleanUp(t){for(let e=0;e<t.length;e++){const s=t[e];delete s.f,delete s.g,delete s.h,delete s.cost,delete s.visited,delete s.closed,delete s.parent}}static heap(){return new p(function(t){return t.f})}static search(t,e,s){this.init(t);const r=this.heap();for(r.push(e);r.size()>0;){const e=r.pop();if(e===s){let t=e;const s=[];for(;t.parent;)s.push(t),t=t.parent;return this.cleanUp(s),s.reverse()}e.closed=!0;const n=this.neighbours(t,e);for(let t=0,o=n.length;t<o;t++){const o=n[t];if(o.closed)continue;const i=e.g+o.cost,h=o.visited;if(!h||i<o.g){if(o.visited=!0,o.parent=e,!o.centroid||!s.centroid)throw new Error(\"Unexpected state\");o.h=o.h||this.heuristic(o.centroid,s.centroid),o.g=i,o.f=o.g+o.h,h?r.rescoreElement(o):r.push(o)}}}return[]}static heuristic(t,e){return d.distanceToSquared(t,e)}static neighbours(t,e){const s=[];for(let r=0;r<e.neighbours.length;r++)s.push(t[e.neighbours[r]]);return s}}.search(o,h,c),u=function(t,e){for(var s=0;s<t.neighbours.length;s++)if(t.neighbours[s]===e.id)return t.portals[s]},l=new g;l.push(t);for(let t=0;t<a.length;t++){const e=a[t],s=a[t+1];if(s){const t=u(e,s);l.push(i[t[0]],i[t[1]])}}l.push(e),l.stringPull();const f=l.path.map(t=>new s(t.x,t.y,t.z));return f.shift(),f}}f.prototype.getGroup=function(){const t=new r;return function(e,s,r=!1){if(!this.zones[e])return null;let n=null,o=Math.pow(50,2);const i=this.zones[e];for(let e=0;e<i.groups.length;e++){const h=i.groups[e];for(const c of h){if(r&&(t.setFromCoplanarPoints(i.vertices[c.vertexIds[0]],i.vertices[c.vertexIds[1]],i.vertices[c.vertexIds[2]]),Math.abs(t.distanceToPoint(s))<.01)&&d.isPointInPoly([i.vertices[c.vertexIds[0]],i.vertices[c.vertexIds[1]],i.vertices[c.vertexIds[2]]],s))return e;const h=d.distanceToSquared(c.centroid,s);h<o&&(n=e,o=h)}}return n}}(),f.prototype.clampStep=function(){const t=new s,e=new r,o=new n,i=new s;let h,c,a=new s;return function(s,r,n,u,l,d){const p=this.zones[u].vertices,g=this.zones[u].groups[l],f=[n],v={};v[n.id]=0,h=void 0,a.set(0,0,0),c=Infinity,e.setFromCoplanarPoints(p[n.vertexIds[0]],p[n.vertexIds[1]],p[n.vertexIds[2]]),e.projectPoint(r,t),i.copy(t);for(let e=f.pop();e;e=f.pop()){o.set(p[e.vertexIds[0]],p[e.vertexIds[1]],p[e.vertexIds[2]]),o.closestPointToPoint(i,t),t.distanceToSquared(i)<c&&(h=e,a.copy(t),c=t.distanceToSquared(i));const s=v[e.id];if(!(s>2))for(let t=0;t<e.neighbours.length;t++){const r=g[e.neighbours[t]];r.id in v||(f.push(r),v[r.id]=s+1)}}return d.copy(a),h}}();class v extends o{constructor(){super(),this._playerMarker=new i(new h(.25,32,32),new c({color:15631215})),this._targetMarker=new i(new a(.3,.3,.3),new c({color:14469912})),this._nodeMarker=new i(new a(.1,.8,.1),new c({color:4417387})),this._stepMarker=new i(new a(.1,1,.1),new c({color:14472114})),this._pathMarker=new o,this._pathLineMaterial=new u({color:41903,linewidth:2}),this._pathPointMaterial=new c({color:41903}),this._pathPointGeometry=new h(.08),this._markers=[this._playerMarker,this._targetMarker,this._nodeMarker,this._stepMarker,this._pathMarker],this._markers.forEach(t=>{t.visible=!1,this.add(t)})}setPath(s){for(;this._pathMarker.children.length;)this._pathMarker.children[0].visible=!1,this._pathMarker.remove(this._pathMarker.children[0]);s=[this._playerMarker.position].concat(s);const r=new e;r.setAttribute(\"position\",new t(new Float32Array(3*s.length),3));for(let t=0;t<s.length;t++)r.attributes.position.setXYZ(t,s[t].x,s[t].y+.2,s[t].z);this._pathMarker.add(new l(r,this._pathLineMaterial));for(let t=0;t<s.length-1;t++){const e=new i(this._pathPointGeometry,this._pathPointMaterial);e.position.copy(s[t]),e.position.y+=.2,this._pathMarker.add(e)}return this._pathMarker.visible=!0,this}setPlayerPosition(t){return this._playerMarker.position.copy(t),this._playerMarker.visible=!0,this}setTargetPosition(t){return this._targetMarker.position.copy(t),this._targetMarker.visible=!0,this}setNodePosition(t){return this._nodeMarker.position.copy(t),this._nodeMarker.visible=!0,this}setStepPosition(t){return this._stepMarker.position.copy(t),this._stepMarker.visible=!0,this}reset(){for(;this._pathMarker.children.length;)this._pathMarker.children[0].visible=!1,this._pathMarker.remove(this._pathMarker.children[0]);return this._markers.forEach(t=>{t.visible=!1}),this}}export{f as Pathfinding,v as PathfindingHelper};\n//# sourceMappingURL=three-pathfinding.module.js.map\n","var PI_2 = Math.PI / 2;\r\nmodule.exports = AFRAME.registerComponent(\"nav-agent\", {\r\n  schema: {\r\n    destination: { type: \"vec3\" },\r\n    active: { default: false },\r\n    speed: { default: 2 },\r\n    gazeTarget: { type: \"selector\" }, // gaze at target when navigating\r\n    mode: { default: \"animate\", oneOf: [\"teleport\", \"animate\"] }, // 移动模式\r\n    viewSync: {default: true, type: 'boolean'}  // 是否同步相机视角\r\n  },\r\n  init: function () {\r\n    this.system = this.el.sceneEl.systems.nav;\r\n    this.system.addAgent(this);\r\n    this.group = null;\r\n    this.path = [];\r\n    this.raycaster = new THREE.Raycaster();\r\n    this.camera = null;\r\n    this.lookControls = null;\r\n    this.el.object3D.traverse((node) => {\r\n      if (node instanceof THREE.Camera) {\r\n        this.camera = node;\r\n        this.lookControls = node.el.components[\"look-controls\"];\r\n      }\r\n    });\r\n  },\r\n  remove: function () {\r\n    this.system.removeAgent(this);\r\n  },\r\n  update: function () {\r\n    this.path.length = 0;\r\n    this.clearState()\r\n  },\r\n  updateNavLocation: function () {\r\n    this.group = null;\r\n    this.path = [];\r\n  },\r\n  // check if look-control's magicWindowControls is enabled\r\n  isMWControlsEnabled: function () {\r\n    var lookCtls = this.lookControls;\r\n    if (\r\n      lookCtls &&\r\n      lookCtls.magicWindowControls &&\r\n      lookCtls.magicWindowControls.enabled\r\n    ) {\r\n      return true;\r\n    }\r\n    return false;\r\n  },\r\n  _getGazeTarget: function (vTarget, rotateTarget, waypoint) {\r\n    // vTarget为lookAt的对象，高度y和rotateTarget的高度一致, 防止视角旋转过程中出现视角倒转的问题\r\n    // TODO: 解决在vTarget高度保持和gazeTarget一致时，视角切换可能出现的视角倒转问题，可在编辑器中复现（多次切换文字、图片等）\r\n    rotateTarget.getWorldPosition(vTarget);\r\n    if (this.data.gazeTarget && this.data.gazeTarget.object3D) {\r\n        let point = this.data.gazeTarget.object3D.position\r\n        vTarget.setX(point.x);\r\n        vTarget.setZ(point.z);\r\n        // vTarget.copy(point);\r\n    } else {\r\n      vTarget.setX(waypoint.x);\r\n      vTarget.setZ(waypoint.z);\r\n    }\r\n  },\r\n  _getVQuaternion: function (\r\n    vQuaternion,\r\n    vOriQuaternion,\r\n    rotateTarget,\r\n    vTarget,\r\n    waypoint\r\n  ) {\r\n    // 将未转动前的姿态保存到vOriQuaternion中\r\n    vOriQuaternion.copy(rotateTarget.quaternion);\r\n    // 先设置lookAt，即转动rotateTarget\r\n    this._getGazeTarget(vTarget, rotateTarget, waypoint);\r\n    rotateTarget.lookAt(vTarget);\r\n    // 获取lookAt后，rotateTarget的姿态数据vQuaternion\r\n    vQuaternion.copy(rotateTarget.quaternion);\r\n    // 重置，将rotateTarget的姿态重置到未转动前的姿态\r\n    rotateTarget.setRotationFromQuaternion(vOriQuaternion);\r\n  },\r\n  _updateRotation: function (\r\n    vPreEulerRot,\r\n    vEulerRot,\r\n    vOriQuaternion,\r\n    vQuaternion,\r\n    rotateTarget,\r\n    slerp = 0.1\r\n  ) {\r\n    if (this.lookControls) {\r\n      if (\r\n        (this.lookControls.touchStarted &&\r\n          this.lookControls.data.touchEnabled) ||\r\n        this.lookControls.mouseDown\r\n      ) {\r\n        // 如果在运动过程中用户拖动视角，则不再处理转动\r\n      } else {\r\n        // 如果需要转动的对象是启用了lookControls的camera, 不能直接旋转Three.js camera对象，\r\n        // 必须增量地设置lookControls.yawObject.rotation.y和lookControls.pitchObject.rotation.x\r\n        // 这样就可以和lookControl保持兼容\r\n        if (slerp) {\r\n          vPreEulerRot.setFromQuaternion(vOriQuaternion, \"YXZ\");\r\n          vOriQuaternion.slerp(vQuaternion, slerp);\r\n          vEulerRot.setFromQuaternion(vOriQuaternion, \"YXZ\");\r\n          // 将magicWindowControl的转动参数置空，否则会影响rotationDone条件的形成\r\n          let mwc = this.lookControls.magicWindowDeltaEuler;\r\n          mwc.x = 0;\r\n          mwc.y = 0;\r\n          mwc.z = 0;\r\n          let pitchObject = this.lookControls.pitchObject\r\n          pitchObject.rotation.x +=\r\n            vEulerRot.x - vPreEulerRot.x;\r\n          pitchObject.rotation.x = Math.max(-PI_2, Math.min(PI_2, pitchObject.rotation.x));\r\n          this.lookControls.yawObject.rotation.y +=\r\n            vEulerRot.y - vPreEulerRot.y;\r\n          \r\n        }\r\n      }\r\n    } else {\r\n      // 最后使用四元数差值进行旋转\r\n      rotateTarget.quaternion.slerp(vQuaternion, slerp);\r\n    }\r\n  },\r\n  tick: (function () {\r\n    const vDest = new THREE.Vector3();\r\n    const vDelta = new THREE.Vector3();\r\n    const vNext = new THREE.Vector3();\r\n    const vQuaternion = new THREE.Quaternion();\r\n    const vOriQuaternion = new THREE.Quaternion();\r\n    const vTarget = new THREE.Vector3();\r\n    const vEulerRot = new THREE.Euler();\r\n    const vPreEulerRot = new THREE.Euler();\r\n    return function (t, dt) {\r\n      const el = this.el;\r\n      const data = this.data;\r\n      const raycaster = this.raycaster;\r\n      if (!data.active) return;\r\n\r\n      const speed = (data.speed * dt) / 1000;\r\n      // Smoothly rotate when navigating around corners.\r\n      // 如果子节点中存在lookControls，那么将旋转的对象设置为lookControls\r\n      const rotateTarget = this.lookControls ? this.camera : el.object3D;\r\n      const vCurrent = this.getNavStart(el.object3D);\r\n      // Use PatrolJS pathfinding system to get shortest path to target.\r\n      if (!this.path.length) {\r\n        // const position = this.el.object3D.position;\r\n        const position = vCurrent;\r\n        vDest.copy(data.destination);\r\n        this.group = this.group || this.system.getGroup(position);\r\n\r\n        // ------------ fix me-----------------\r\n        // 当起始点和目的点在同一个navMesh的面中时，this.system.getPath可能不会返回两点间的直线路径，可能返回一个拐弯的路径\r\n        // 因此加入下面的判断逻辑（TODO：深入了解pathfinding算法后，再确认这种验证逻辑是否正确，就目前来看，起到了一定的优化作用）\r\n        const closestNode = this.system.getNode(position, this.group);\r\n        const farthestNode = this.system.getNode(vDest, this.group);\r\n        // 起始点和目的点都在同一个node中，则直接返回两点间的直线路径\r\n        if (closestNode && farthestNode && farthestNode.id === closestNode.id) {\r\n          this.path = [vDest.clone()];\r\n        }\r\n        // ------------- End ------------------\r\n        else {\r\n          this.path = this.system.getPath(position, vDest, this.group) || [];\r\n        }\r\n\r\n        el.emit(\"navigation-start\");\r\n      }\r\n\r\n      // If no path is found, exit.\r\n      if (!this.path.length) {\r\n        console.warn(\"[nav] Unable to find path to %o.\", data.destination);\r\n        this.el.setAttribute(\"nav-agent\", { active: false });\r\n        el.emit(\"navigation-end\");\r\n        return;\r\n      }\r\n\r\n      // Current segment is a vector from current position to next waypoint.\r\n      // const vCurrent = el.object3D.position;\r\n    //   const vCurrent = this.getNavStart(el.object3D);\r\n      const vWaypoint = this.path[0];\r\n      vDelta.subVectors(vWaypoint, vCurrent);\r\n\r\n      // 如果是传送模式，直接设置终点位置和视角\r\n      if (this.data.mode === \"teleport\") {\r\n        let targetPoint = this.path[this.path.length - 1];\r\n        vCurrent.copy(targetPoint);\r\n        this.terrianMove(el.object3D,dt);\r\n        // 获取总共需要旋转多少的姿态数据到vQuaternion\r\n        // 如果指定了gazeTarget，再旋转\r\n        if (\r\n          this.data.viewSync && !this.isMWControlsEnabled() &&\r\n          this.data.gazeTarget &&\r\n          this.data.gazeTarget.object3D\r\n        ) {\r\n          this._getVQuaternion(\r\n            vQuaternion,\r\n            vOriQuaternion,\r\n            rotateTarget,\r\n            vTarget,\r\n            null\r\n          );\r\n          this._updateRotation(\r\n            vPreEulerRot,\r\n            vEulerRot,\r\n            vOriQuaternion,\r\n            vQuaternion,\r\n            rotateTarget,\r\n            1\r\n          );\r\n        }\r\n\r\n        this.el.setAttribute(\"nav-agent\", {\r\n          active: false,\r\n          gazeTarget: null,\r\n        }); // deactive and clear gazeTarget\r\n        el.emit(\"navigation-end\");\r\n        return;\r\n      }\r\n\r\n      // animate mode\r\n      const distance = vDelta.length();\r\n      let gazeTarget;\r\n\r\n      if (distance < speed) {\r\n        // If <1 step from current waypoint, discard it and move toward next.\r\n        let moved = this.path.shift();\r\n        const mwcEnabled = this.isMWControlsEnabled();\r\n        let rotationGap = mwcEnabled\r\n          ? 0\r\n          : THREE.MathUtils.radToDeg(\r\n              rotateTarget.quaternion.angleTo(vQuaternion)\r\n            );\r\n        if (!this.data.viewSync) {\r\n            rotationGap = 0\r\n        }\r\n        const rotationDone = Math.abs(rotationGap) < 0.2; // default slerp interpolation factor is 0.1\r\n        // After discarding the last waypoint, exit pathfinding.\r\n        if (!this.path.length && rotationDone) {\r\n          // 获取总共需要旋转多少的姿态数据到vQuaternion\r\n          if (!mwcEnabled && this.data.viewSync) {\r\n            this._getVQuaternion(\r\n              vQuaternion,\r\n              vOriQuaternion,\r\n              rotateTarget,\r\n              vTarget,\r\n              moved\r\n            );\r\n            this._updateRotation(\r\n              vPreEulerRot,\r\n              vEulerRot,\r\n              vOriQuaternion,\r\n              vQuaternion,\r\n              rotateTarget,\r\n              1\r\n            );\r\n          }\r\n          this.el.setAttribute(\"nav-agent\", {\r\n            active: false,\r\n            gazeTarget: null,\r\n          }); // deactive and clear gazeTarget\r\n          el.emit(\"navigation-end\");\r\n          return;\r\n        } else if (!this.path.length && !mwcEnabled && !rotationDone) {\r\n          // if arrived target position but rotation is not reached the target\r\n          // continue move\r\n          this.path.push(moved);\r\n        }\r\n\r\n        vNext.copy(vCurrent);\r\n        gazeTarget = this.path[0];\r\n      } else {\r\n        // If still far away from next waypoint, find next position for\r\n        // the current frame.\r\n        vNext.copy(vDelta.setLength(speed)).add(vCurrent);\r\n        gazeTarget = vWaypoint;\r\n      }\r\n\r\n      // 获取总共需要旋转多少的姿态数据到vQuaternion\r\n      if (!this.isMWControlsEnabled() && this.data.viewSync) {\r\n        this._getVQuaternion(\r\n          vQuaternion,\r\n          vOriQuaternion,\r\n          rotateTarget,\r\n          vTarget,\r\n          gazeTarget\r\n        );\r\n        this._updateRotation(\r\n          vPreEulerRot,\r\n          vEulerRot,\r\n          vOriQuaternion,\r\n          vQuaternion,\r\n          rotateTarget\r\n        );\r\n      }\r\n\r\n      vCurrent.copy(vNext);\r\n      this.terrianMove(el.object3D,dt);\r\n\r\n      // 不使用下面的这个，会导致视角闪烁\r\n      // Raycast against the nav mesh, to keep the agent moving along the\r\n      // ground, not traveling in a straight line from higher to lower waypoints.\r\n      // raycaster.ray.origin.copy(vNext);\r\n      // raycaster.ray.origin.y += 1.5;\r\n      // raycaster.ray.direction = {x:0, y:-1, z:0};\r\n      // const intersections = raycaster.intersectObject(this.system.getNavMesh());\r\n\r\n      // if (!intersections.length) {\r\n      //   // Raycasting failed. Step toward the waypoint and hope for the best.\r\n      //   vCurrent.copy(vNext);\r\n      // } else {\r\n      //   // Re-project next position onto nav mesh.\r\n      //   vDelta.subVectors(intersections[0].point, vCurrent);\r\n      //   vCurrent.add(vDelta.setLength(speed));\r\n      // }\r\n    };\r\n  })(),\r\n  getNavStart:function(obj3D) {\r\n        if (!obj3D._navPoint) {\r\n            obj3D._navPoint = this.system.getNavStart(obj3D.position);\r\n            if (!obj3D._navPoint) {\r\n                obj3D._navPoint = new THREE.Vector3();\r\n                obj3D._navPoint.copy(obj3D.position);\r\n            } else {\r\n                obj3D._navPoint = obj3D._navPoint.point\r\n            }\r\n        }\r\n        return obj3D._navPoint;\r\n  },\r\n  clearState: function() {\r\n      delete this.el.object3D._navPoint;\r\n      this.updateNavLocation()\r\n  },\r\n  terrianMove: (function(){\r\n    let wPos = new THREE.Vector3();\r\n    let deltaV = new THREE.Vector3();\r\n    let deltaProject = new THREE.Vector3();\r\n    const yNormal = new THREE.Vector3(0,1,0);\r\n    return function(obj3D,dt) {\r\n        obj3D.getWorldPosition(wPos);\r\n        obj3D.position.copy(obj3D._navPoint);\r\n        let interset = this.system.getTerrianIntersect(obj3D._navPoint);\r\n        if (!interset) {\r\n            return\r\n        }\r\n        \r\n        // 检测上下坡\r\n        if (!interset.point.equals(wPos)) {\r\n            deltaV.subVectors(interset.point, wPos);\r\n            deltaProject.copy(deltaV);\r\n            deltaProject.projectOnPlane(yNormal);\r\n            let angle = deltaProject.lengthSq() == 0 ? Infinity : deltaProject.angleTo(deltaV);\r\n            if (angle > Math.PI/4 && Math.abs(interset.point.y - wPos.y) > 0.001) {\r\n                if (interset.point.y > wPos.y) {\r\n                    this.el.emit('nav-agent-move', {move: 'up'})\r\n                } else {\r\n                    this.el.emit('nav-agent-move', {move: 'down'})\r\n                }\r\n            }\r\n        }\r\n        obj3D.position.y = interset.point.y\r\n        // obj3D.position.copy(interset.point);\r\n      }\r\n  })(),\r\n});\r\n","/**\r\n * nav-mesh\r\n *\r\n * Waits for a mesh to be loaded on the current entity, then sets it as the\r\n * nav mesh in the pathfinding system.\r\n */\r\nmodule.exports = AFRAME.registerComponent(\"nav-mesh\", {\r\n  schema: {\r\n    nodeName: { type: \"string\" }\r\n  },\r\n\r\n  init: function () {\r\n    this.system = this.el.sceneEl.systems.nav;\r\n    this.hasLoadedNavMesh = false;\r\n    this.nodeName = this.data.nodeName;\r\n    this.el.addEventListener(\"object3dset\", this.loadNavMesh.bind(this));\r\n  },\r\n\r\n  play: function () {\r\n    if (!this.hasLoadedNavMesh) this.loadNavMesh();\r\n  },\r\n\r\n  loadNavMesh: function () {\r\n    var self = this;\r\n    const object = this.el.getObject3D(\"mesh\");\r\n    const scene = this.el.sceneEl.object3D;\r\n\r\n    if (!object) return;\r\n\r\n    let navMesh;\r\n    object.traverse((node) => {\r\n      if (node.isMesh && (!self.nodeName || node.name === self.nodeName)) {\r\n        navMesh = node;\r\n      }\r\n    });\r\n\r\n    if (!navMesh) return;\r\n\r\n    const navMeshGeometry = navMesh.geometry.clone();\r\n    navMesh.updateWorldMatrix(true, false);\r\n    navMeshGeometry.applyMatrix4(navMesh.matrixWorld);\r\n    this.system.setNavMeshGeometry(navMeshGeometry);\r\n    this.hasLoadedNavMesh = true;\r\n  },\r\n});\r\n","/**\r\n * nav-mesh\r\n *\r\n * Waits for a mesh to be loaded on the current entity, then sets it as the\r\n * nav mesh in the pathfinding system.\r\n */\r\nmodule.exports = AFRAME.registerComponent(\"nav-terrian\", {\r\n  schema: {\r\n    terrianName: { type: \"string\" },\r\n  },\r\n\r\n  init: function () {\r\n    this.system = this.el.sceneEl.systems.nav;\r\n    this.hasLoadedNavMesh = false;\r\n    this.nodeName = this.data.nodeName;\r\n    this.el.addEventListener(\"object3dset\", this.loadNavMesh.bind(this));\r\n  },\r\n\r\n  play: function () {\r\n    if (!this.hasLoadedNavMesh) this.loadNavMesh();\r\n  },\r\n\r\n  loadNavMesh: function () {\r\n    var self = this;\r\n    const object = this.el.getObject3D(\"mesh\");\r\n    const scene = this.el.sceneEl.object3D;\r\n\r\n    if (!object) return;\r\n\r\n    let terrianMesh;\r\n    object.traverse((node) => {\r\n      if (node.isObject3D && node.name === self.data.terrianName) {\r\n        terrianMesh = node;\r\n      }\r\n    });\r\n\r\n    if (!terrianMesh) return;\r\n\r\n    scene.updateMatrixWorld();\r\n    this.system.setTerrianMesh(terrianMesh);\r\n    this.hasLoadedNavMesh = true;\r\n  },\r\n});\r\n","const { Pathfinding } = require(\"three-pathfinding\");\r\n\r\nconst pathfinder = new Pathfinding();\r\nconst ZONE = \"level\";\r\n\r\n/**\r\n * nav\r\n *\r\n * Pathfinding system, using PatrolJS.\r\n */\r\nmodule.exports = AFRAME.registerSystem(\"nav\", {\r\n  init: function () {\r\n    this.navMesh = null;\r\n    this.agents = new Set();\r\n    this.terrianMesh = null;\r\n  },\r\n\r\n  /**\r\n   * @param {THREE.Geometry} geometry\r\n   */\r\n  setNavMeshGeometry: function (geometry) {\r\n    this.navMesh = new THREE.Mesh(geometry);\r\n    pathfinder.setZoneData(ZONE, Pathfinding.createZone(geometry));\r\n    Array.from(this.agents).forEach((agent) => agent.updateNavLocation());\r\n  },\r\n\r\n  /**\r\n   * @return {THREE.Mesh}\r\n   */\r\n  getNavMesh: function () {\r\n    return this.navMesh;\r\n  },\r\n\r\n  /**\r\n   * @param {NavAgent} ctrl\r\n   */\r\n  addAgent: function (ctrl) {\r\n    this.agents.add(ctrl);\r\n  },\r\n\r\n  /**\r\n   * @param {NavAgent} ctrl\r\n   */\r\n  removeAgent: function (ctrl) {\r\n    this.agents.delete(ctrl);\r\n  },\r\n\r\n  /**\r\n   * @param  {THREE.Vector3} start\r\n   * @param  {THREE.Vector3} end\r\n   * @param  {number} groupID\r\n   * @return {Array<THREE.Vector3>}\r\n   */\r\n  getPath: function (start, end, groupID) {\r\n    return this.navMesh ? pathfinder.findPath(start, end, ZONE, groupID) : null;\r\n  },\r\n\r\n  /**\r\n   * @param {THREE.Vector3} position\r\n   * @return {number}\r\n   */\r\n   getGroup: function (position, checkPolygon = false) {\r\n    return this.navMesh ? pathfinder.getGroup(ZONE, position, checkPolygon) : null;\r\n  },\r\n\r\n  /**\r\n   * @param  {THREE.Vector3} position\r\n   * @param  {number} groupID\r\n   * @return {Node}\r\n   */\r\n   getNode: function (position, groupID, checkPolygon = false) {\r\n    return this.navMesh\r\n      ? // disable geometry within check. Player would get stuck and overstep the boundary if set to true.\r\n        pathfinder.getClosestNode(position, ZONE, groupID, checkPolygon)\r\n      : null;\r\n  },\r\n\r\n  /**\r\n   * @param  {THREE.Vector3} start Starting position.\r\n   * @param  {THREE.Vector3} end Desired ending position.\r\n   * @param  {number} groupID\r\n   * @param  {Node} node\r\n   * @param  {THREE.Vector3} endTarget (Output) Adjusted step end position.\r\n   * @return {Node} Current node, after step is taken.\r\n   */\r\n  clampStep: function (start, end, groupID, node, endTarget) {\r\n    if (!this.navMesh) {\r\n      endTarget.copy(end);\r\n      return null;\r\n    } else if (!node) {\r\n      endTarget.copy(end);\r\n      return this.getNode(end, groupID);\r\n    }\r\n    return pathfinder.clampStep(start, end, node, ZONE, groupID, endTarget);\r\n  },\r\n\r\n  setTerrianMesh: function (terrianMesh) {\r\n    this.terrianMesh = terrianMesh;\r\n  },\r\n\r\n  getTerrianMesh: function () {\r\n    return this.terrianMesh;\r\n  },\r\n\r\n  getTerrianIntersect: function (point) {\r\n    return this.projectPoint(point, this.terrianMesh);\r\n  },\r\n\r\n  getNavStart: function (point) {\r\n    return this.projectPoint(point, this.navMesh);\r\n  },\r\n\r\n  // 把点point从上到下投影到terrian mesh上，并返回第一个交点信息\r\n  projectPoint: (function () {\r\n    let origin = new THREE.Vector3();\r\n    let direction = new THREE.Vector3(0, -1, 0);\r\n    let raycaster = new THREE.Raycaster(origin, direction);\r\n    let target = [];\r\n    return function (point, terrian) {\r\n      if (!terrian || !point) {\r\n        return;\r\n      }\r\n      origin.copy(point);\r\n      origin.y += 1.5;\r\n      // needs update\r\n      raycaster.set(origin, direction);\r\n      target.length = 0;\r\n      let intersections = raycaster.intersectObject(terrian, true, target);\r\n      if (intersections && intersections.length > 0) {\r\n        let res = intersections[0];\r\n        target.length = 0;\r\n        return res;\r\n      }\r\n    };\r\n  })(),\r\n});\r\n","module.exports = __WEBPACK_EXTERNAL_MODULE__612__;","// The module cache\nvar __webpack_module_cache__ = {};\n\n// The require function\nfunction __webpack_require__(moduleId) {\n\t// Check if module is in cache\n\tvar cachedModule = __webpack_module_cache__[moduleId];\n\tif (cachedModule !== undefined) {\n\t\treturn cachedModule.exports;\n\t}\n\t// Create a new module (and put it into the cache)\n\tvar module = __webpack_module_cache__[moduleId] = {\n\t\t// no module.id needed\n\t\t// no module.loaded needed\n\t\texports: {}\n\t};\n\n\t// Execute the module function\n\t__webpack_modules__[moduleId](module, module.exports, __webpack_require__);\n\n\t// Return the exports of the module\n\treturn module.exports;\n}\n\n","// getDefaultExport function for compatibility with non-harmony modules\n__webpack_require__.n = (module) => {\n\tvar getter = module && module.__esModule ?\n\t\t() => (module['default']) :\n\t\t() => (module);\n\t__webpack_require__.d(getter, { a: getter });\n\treturn getter;\n};","// define getter functions for harmony exports\n__webpack_require__.d = (exports, definition) => {\n\tfor(var key in definition) {\n\t\tif(__webpack_require__.o(definition, key) && !__webpack_require__.o(exports, key)) {\n\t\t\tObject.defineProperty(exports, key, { enumerable: true, get: definition[key] });\n\t\t}\n\t}\n};","__webpack_require__.o = (obj, prop) => (Object.prototype.hasOwnProperty.call(obj, prop))","// define __esModule on exports\n__webpack_require__.r = (exports) => {\n\tif(typeof Symbol !== 'undefined' && Symbol.toStringTag) {\n\t\tObject.defineProperty(exports, Symbol.toStringTag, { value: 'Module' });\n\t}\n\tObject.defineProperty(exports, '__esModule', { value: true });\n};","require('./nav-mesh');\r\nrequire('./nav-terrian');\r\nrequire('./nav-agent');\r\nrequire('./system');\r\n"],"names":["root","factory","exports","module","require","define","amd","a","i","self","__WEBPACK_EXTERNAL_MODULE__612__","d","roundNumber","t","e","s","Math","pow","round","sample","floor","random","length","distanceToSquared","x","r","y","n","z","isPointInPoly","o","isVectorInPolygon","vertexIds","forEach","min","max","push","this","triarea2","vequal","mergeVertices","Number","EPSILON","getIndex","getAttribute","h","count","c","u","l","log10","p","g","getX","f","getY","getZ","v","Float32Array","itemSize","normalized","b","setAttribute","setIndex","constructor","content","scoreFunction","sinkDown","pop","bubbleUp","remove","indexOf","size","rescoreElement","portals","left","right","stringPull","path","zones","createZone","buildZone","_buildNavigationMesh","vertices","_buildPolygonGroups","groups","Array","Map","set","neighbours","get","_getSharedVerticesInOrder","add","divideScalar","id","centroid","_buildPolygonsFromGeometry","_spreadGroupId","Set","group","polygons","_buildPolygonNeighbours","includes","attributes","position","index","fromBufferAttribute","from","console","warn","setZoneData","getRandomNode","getClosestNode","Infinity","findPath","init","cost","visited","closed","parent","cleanUp","heap","search","reverse","Error","heuristic","map","shift","prototype","getGroup","setFromCoplanarPoints","abs","distanceToPoint","clampStep","projectPoint","copy","closestPointToPoint","super","_playerMarker","color","_targetMarker","_nodeMarker","_stepMarker","_pathMarker","_pathLineMaterial","linewidth","_pathPointMaterial","_pathPointGeometry","_markers","visible","setPath","children","concat","setXYZ","setPlayerPosition","setTargetPosition","setNodePosition","setStepPosition","reset","PI_2","PI","AFRAME","registerComponent","schema","destination","type","active","default","speed","gazeTarget","mode","oneOf","viewSync","system","el","sceneEl","systems","nav","addAgent","raycaster","THREE","Raycaster","camera","lookControls","object3D","traverse","node","Camera","components","removeAgent","update","clearState","updateNavLocation","isMWControlsEnabled","lookCtls","magicWindowControls","enabled","_getGazeTarget","vTarget","rotateTarget","waypoint","getWorldPosition","data","point","setX","setZ","_getVQuaternion","vQuaternion","vOriQuaternion","quaternion","lookAt","setRotationFromQuaternion","_updateRotation","vPreEulerRot","vEulerRot","slerp","touchStarted","touchEnabled","mouseDown","setFromQuaternion","mwc","magicWindowDeltaEuler","pitchObject","rotation","yawObject","tick","vDest","Vector3","vDelta","vNext","Quaternion","Euler","dt","vCurrent","getNavStart","closestNode","getNode","farthestNode","clone","getPath","emit","vWaypoint","subVectors","targetPoint","terrianMove","moved","mwcEnabled","rotationGap","MathUtils","radToDeg","angleTo","rotationDone","setLength","obj3D","_navPoint","wPos","deltaV","deltaProject","yNormal","interset","getTerrianIntersect","equals","projectOnPlane","lengthSq","move","nodeName","hasLoadedNavMesh","addEventListener","loadNavMesh","bind","play","object","getObject3D","navMesh","isMesh","name","navMeshGeometry","geometry","updateWorldMatrix","applyMatrix4","matrixWorld","setNavMeshGeometry","terrianName","scene","terrianMesh","isObject3D","updateMatrixWorld","setTerrianMesh","Pathfinding","pathfinder","ZONE","registerSystem","agents","Mesh","agent","getNavMesh","ctrl","delete","start","end","groupID","checkPolygon","endTarget","getTerrianMesh","origin","direction","target","terrian","intersections","intersectObject","res","__webpack_module_cache__","__webpack_require__","moduleId","cachedModule","undefined","__webpack_modules__","getter","__esModule","definition","key","Object","defineProperty","enumerable","obj","prop","hasOwnProperty","call","Symbol","toStringTag","value"],"sourceRoot":""}